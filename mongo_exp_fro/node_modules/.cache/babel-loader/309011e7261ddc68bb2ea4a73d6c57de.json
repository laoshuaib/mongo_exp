{"ast":null,"code":"import { h } from 'vue';\nimport { ElCheckbox } from '../../checkbox/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { ArrowRight, Loading } from '@element-plus/icons-vue';\nimport '../../../utils/index.mjs';\nimport { getProp } from '../../../utils/objects.mjs';\nconst defaultClassNames = {\n  selection: \"table-column--selection\",\n  expand: \"table__expand-column\"\n};\nconst cellStarts = {\n  default: {\n    order: \"\"\n  },\n  selection: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: \"\"\n  },\n  expand: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: \"\"\n  },\n  index: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: \"\"\n  }\n};\n\nconst getDefaultClassName = type => {\n  return defaultClassNames[type] || \"\";\n};\n\nconst cellForced = {\n  selection: {\n    renderHeader({\n      store\n    }) {\n      function isDisabled() {\n        return store.states.data.value && store.states.data.value.length === 0;\n      }\n\n      return h(ElCheckbox, {\n        disabled: isDisabled(),\n        size: store.states.tableSize.value,\n        indeterminate: store.states.selection.value.length > 0 && !store.states.isAllSelected.value,\n        \"onUpdate:modelValue\": store.toggleAllSelection,\n        modelValue: store.states.isAllSelected.value\n      });\n    },\n\n    renderCell({\n      row,\n      column,\n      store,\n      $index\n    }) {\n      return h(ElCheckbox, {\n        disabled: column.selectable ? !column.selectable.call(null, row, $index) : false,\n        size: store.states.tableSize.value,\n        onChange: () => {\n          store.commit(\"rowSelectedChanged\", row);\n        },\n        onClick: event => event.stopPropagation(),\n        modelValue: store.isSelected(row)\n      });\n    },\n\n    sortable: false,\n    resizable: false\n  },\n  index: {\n    renderHeader({\n      column\n    }) {\n      return column.label || \"#\";\n    },\n\n    renderCell({\n      column,\n      $index\n    }) {\n      let i = $index + 1;\n      const index = column.index;\n\n      if (typeof index === \"number\") {\n        i = $index + index;\n      } else if (typeof index === \"function\") {\n        i = index($index);\n      }\n\n      return h(\"div\", {}, [i]);\n    },\n\n    sortable: false\n  },\n  expand: {\n    renderHeader({\n      column\n    }) {\n      return column.label || \"\";\n    },\n\n    renderCell({\n      row,\n      store,\n      expanded\n    }) {\n      const {\n        ns\n      } = store;\n      const classes = [ns.e(\"expand-icon\")];\n\n      if (expanded) {\n        classes.push(ns.em(\"expand-icon\", \"expanded\"));\n      }\n\n      const callback = function (e) {\n        e.stopPropagation();\n        store.toggleRowExpansion(row);\n      };\n\n      return h(\"div\", {\n        class: classes,\n        onClick: callback\n      }, {\n        default: () => {\n          return [h(ElIcon, null, {\n            default: () => {\n              return [h(ArrowRight)];\n            }\n          })];\n        }\n      });\n    },\n\n    sortable: false,\n    resizable: false\n  }\n};\n\nfunction defaultRenderCell({\n  row,\n  column,\n  $index\n}) {\n  var _a;\n\n  const property = column.property;\n  const value = property && getProp(row, property).value;\n\n  if (column && column.formatter) {\n    return column.formatter(row, column, value, $index);\n  }\n\n  return ((_a = value == null ? void 0 : value.toString) == null ? void 0 : _a.call(value)) || \"\";\n}\n\nfunction treeCellPrefix({\n  row,\n  treeNode,\n  store\n}, createPlacehoder = false) {\n  const {\n    ns\n  } = store;\n\n  if (!treeNode) {\n    if (createPlacehoder) {\n      return [h(\"span\", {\n        class: ns.e(\"placeholder\")\n      })];\n    }\n\n    return null;\n  }\n\n  const ele = [];\n\n  const callback = function (e) {\n    e.stopPropagation();\n    store.loadOrToggle(row);\n  };\n\n  if (treeNode.indent) {\n    ele.push(h(\"span\", {\n      class: ns.e(\"indent\"),\n      style: {\n        \"padding-left\": `${treeNode.indent}px`\n      }\n    }));\n  }\n\n  if (typeof treeNode.expanded === \"boolean\" && !treeNode.noLazyChildren) {\n    const expandClasses = [ns.e(\"expand-icon\"), treeNode.expanded ? ns.em(\"expand-icon\", \"expanded\") : \"\"];\n    let icon = ArrowRight;\n\n    if (treeNode.loading) {\n      icon = Loading;\n    }\n\n    ele.push(h(\"div\", {\n      class: expandClasses,\n      onClick: callback\n    }, {\n      default: () => {\n        return [h(ElIcon, {\n          class: {\n            [ns.is(\"loading\")]: treeNode.loading\n          }\n        }, {\n          default: () => [h(icon)]\n        })];\n      }\n    }));\n  } else {\n    ele.push(h(\"span\", {\n      class: ns.e(\"placeholder\")\n    }));\n  }\n\n  return ele;\n}\n\nexport { cellForced, cellStarts, defaultRenderCell, getDefaultClassName, treeCellPrefix };","map":{"version":3,"mappings":"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","names":["defaultClassNames","selection","expand","cellStarts","default","order","width","minWidth","realWidth","index","getDefaultClassName","type","cellForced","renderHeader","store","isDisabled","states","data","value","length","h","ElCheckbox","disabled","size","tableSize","indeterminate","isAllSelected","toggleAllSelection","modelValue","renderCell","row","column","$index","selectable","call","onChange","commit","onClick","event","stopPropagation","isSelected","sortable","resizable","label","i","expanded","ns","classes","e","push","em","callback","toggleRowExpansion","class","ElIcon","ArrowRight","defaultRenderCell","_a","property","getProp","formatter","toString","treeCellPrefix","treeNode","createPlacehoder","ele","loadOrToggle","indent","style","noLazyChildren","expandClasses","icon","loading","Loading","is"],"sources":["../../../../../../packages/components/table/src/config.ts"],"sourcesContent":["// @ts-nocheck\nimport { h } from 'vue'\nimport ElCheckbox from '@element-plus/components/checkbox'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { ArrowRight, Loading } from '@element-plus/icons-vue'\nimport { getProp } from '@element-plus/utils'\n\nimport type { VNode } from 'vue'\nimport type { TableColumnCtx } from './table-column/defaults'\nimport type { Store } from './store'\nimport type { TreeNode } from './table/defaults'\n\nconst defaultClassNames = {\n  selection: 'table-column--selection',\n  expand: 'table__expand-column',\n}\n\nexport const cellStarts = {\n  default: {\n    order: '',\n  },\n  selection: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: '',\n  },\n  expand: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: '',\n  },\n  index: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: '',\n  },\n}\n\nexport const getDefaultClassName = (type) => {\n  return defaultClassNames[type] || ''\n}\n\n// 这些选项不应该被覆盖\nexport const cellForced = {\n  selection: {\n    renderHeader<T>({ store }: { store: Store<T> }) {\n      function isDisabled() {\n        return store.states.data.value && store.states.data.value.length === 0\n      }\n      return h(ElCheckbox, {\n        disabled: isDisabled(),\n        size: store.states.tableSize.value,\n        indeterminate:\n          store.states.selection.value.length > 0 &&\n          !store.states.isAllSelected.value,\n        'onUpdate:modelValue': store.toggleAllSelection,\n        modelValue: store.states.isAllSelected.value,\n      })\n    },\n    renderCell<T>({\n      row,\n      column,\n      store,\n      $index,\n    }: {\n      row: T\n      column: TableColumnCtx<T>\n      store: Store<T>\n      $index: string\n    }) {\n      return h(ElCheckbox, {\n        disabled: column.selectable\n          ? !column.selectable.call(null, row, $index)\n          : false,\n        size: store.states.tableSize.value,\n        onChange: () => {\n          store.commit('rowSelectedChanged', row)\n        },\n        onClick: (event: Event) => event.stopPropagation(),\n        modelValue: store.isSelected(row),\n      })\n    },\n    sortable: false,\n    resizable: false,\n  },\n  index: {\n    renderHeader<T>({ column }: { column: TableColumnCtx<T> }) {\n      return column.label || '#'\n    },\n    renderCell<T>({\n      column,\n      $index,\n    }: {\n      column: TableColumnCtx<T>\n      $index: number\n    }) {\n      let i = $index + 1\n      const index = column.index\n\n      if (typeof index === 'number') {\n        i = $index + index\n      } else if (typeof index === 'function') {\n        i = index($index)\n      }\n      return h('div', {}, [i])\n    },\n    sortable: false,\n  },\n  expand: {\n    renderHeader<T>({ column }: { column: TableColumnCtx<T> }) {\n      return column.label || ''\n    },\n    renderCell<T>({\n      row,\n      store,\n      expanded,\n    }: {\n      row: T\n      store: Store<T>\n      expanded: boolean\n    }) {\n      const { ns } = store\n      const classes = [ns.e('expand-icon')]\n      if (expanded) {\n        classes.push(ns.em('expand-icon', 'expanded'))\n      }\n      const callback = function (e: Event) {\n        e.stopPropagation()\n        store.toggleRowExpansion(row)\n      }\n      return h(\n        'div',\n        {\n          class: classes,\n          onClick: callback,\n        },\n        {\n          default: () => {\n            return [\n              h(ElIcon, null, {\n                default: () => {\n                  return [h(ArrowRight)]\n                },\n              }),\n            ]\n          },\n        }\n      )\n    },\n    sortable: false,\n    resizable: false,\n  },\n}\n\nexport function defaultRenderCell<T>({\n  row,\n  column,\n  $index,\n}: {\n  row: T\n  column: TableColumnCtx<T>\n  $index: number\n}) {\n  const property = column.property\n  const value = property && getProp(row, property).value\n  if (column && column.formatter) {\n    return column.formatter(row, column, value, $index)\n  }\n  return value?.toString?.() || ''\n}\n\nexport function treeCellPrefix<T>(\n  {\n    row,\n    treeNode,\n    store,\n  }: {\n    row: T\n    treeNode: TreeNode\n    store: Store<T>\n  },\n  createPlacehoder = false\n) {\n  const { ns } = store\n  if (!treeNode) {\n    if (createPlacehoder) {\n      return [\n        h('span', {\n          class: ns.e('placeholder'),\n        }),\n      ]\n    }\n    return null\n  }\n  const ele: VNode[] = []\n  const callback = function (e) {\n    e.stopPropagation()\n    store.loadOrToggle(row)\n  }\n  if (treeNode.indent) {\n    ele.push(\n      h('span', {\n        class: ns.e('indent'),\n        style: { 'padding-left': `${treeNode.indent}px` },\n      })\n    )\n  }\n  if (typeof treeNode.expanded === 'boolean' && !treeNode.noLazyChildren) {\n    const expandClasses = [\n      ns.e('expand-icon'),\n      treeNode.expanded ? ns.em('expand-icon', 'expanded') : '',\n    ]\n    let icon = ArrowRight\n    if (treeNode.loading) {\n      icon = Loading\n    }\n\n    ele.push(\n      h(\n        'div',\n        {\n          class: expandClasses,\n          onClick: callback,\n        },\n        {\n          default: () => {\n            return [\n              h(\n                ElIcon,\n                { class: { [ns.is('loading')]: treeNode.loading } },\n                {\n                  default: () => [h(icon)],\n                }\n              ),\n            ]\n          },\n        }\n      )\n    )\n  } else {\n    ele.push(\n      h('span', {\n        class: ns.e('placeholder'),\n      })\n    )\n  }\n  return ele\n}\n"]},"metadata":{},"sourceType":"module"}
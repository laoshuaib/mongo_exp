{"ast":null,"code":"import request from \"../../untils/request\";\nexport default {\n  name: \"addCuisine\",\n\n  data() {\n    return {\n      tableData: [],\n      usingData: [],\n      search: \"\"\n    };\n  },\n\n  created() {\n    this.load();\n  },\n\n  methods: {\n    goBack() {\n      this.$router.push(\"/manager/cuisineManage\");\n    },\n\n    find() {\n      request.get(\"/ingredient/findList\", {\n        params: {\n          search: this.search\n        }\n      }).then(res => {\n        this.tableData = res.data;\n      });\n    },\n\n    goBackConfirm() {\n      this.$confirm(\"未保存数据将丢失\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        this.goBack();\n      });\n    },\n\n    confirm() {\n      this.$confirm(\"请确定菜品名字, 确定后不建议修改\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        this.save();\n      }).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"已取消保存\"\n        });\n      });\n    },\n\n    save() {\n      if (this.usingData.length === 0) {\n        this.$message({\n          type: \"error\",\n          message: \"菜品配方不可为空\"\n        });\n        return;\n      }\n\n      request.post(\"/cuisine/save\", this.form).then(res => {\n        if (res.code === 0) {\n          this.$message({\n            type: \"success\",\n            message: \"新增成功\"\n          });\n          this.load();\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n    },\n\n    load() {\n      request.get(\"/ingredient/viewList\").then(res => {\n        this.tableData = res.data;\n      });\n    },\n\n    handleAdd(row) {\n      //删除左侧\n      let index = this.tableData.indexOf(row);\n      if (index > -1) this.tableData.splice(index, 1); //添加dosage属性\n\n      row.dosage = 100; //初始化为100g\n\n      this.usingData.push(row);\n    },\n\n    handleDelete(row) {\n      let index = this.usingData.indexOf(row);\n      if (index > -1) this.usingData.splice(index, 1);\n      this.tableData.push(row);\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","name","data","tableData","usingData","search","created","load","methods","goBack","$router","push","find","get","params","then","res","goBackConfirm","$confirm","confirmButtonText","cancelButtonText","type","confirm","save","catch","$message","message","length","post","form","code","msg","handleAdd","row","index","indexOf","splice","dosage","handleDelete"],"sourceRoot":"","sources":["C:\\Users\\laoshuaib\\Desktop\\restaurant\\src\\views\\addCuisine.vue"],"sourcesContent":["<template>\n  <el-page-header content=\"新增菜品\" @back=\"goBackConfirm\" />\n  <!--    搜索头部区域-->\n  <div style=\"padding: 10px; height: 50px; line-height: 50px; margin-top: 20px\">\n    <el-row>\n      <el-col :span=\"10\">\n        <div style=\"display: flex\">\n          <el-input\n            v-model.trim=\"search\"\n            placeholder=\"请输入ID或食材名\"\n            style=\"width: 45%\"\n            clearable\n          />\n          <el-button\n            type=\"primary\"\n            color=\"#fab6b6\"\n            style=\"margin-left: 10px\"\n            @click=\"find\"\n            >查询</el-button\n          >\n        </div>\n      </el-col>\n      <el-col :span=\"2\"><div /></el-col>\n      <el-col :span=\"10\">\n        <div style=\"display: flex\">\n          <el-input\n            v-model.trim=\"search\"\n            placeholder=\"请输入菜品名\"\n            style=\"width: 45%\"\n            clearable\n          />\n          <el-input\n            v-model.trim=\"search\"\n            placeholder=\"请输入菜品价格\"\n            style=\"width: 45%; padding-left: 10px\"\n            clearable\n          />\n          <el-button\n            type=\"primary\"\n            color=\"#fab6b6\"\n            style=\"margin-left: 10px\"\n            @click=\"confirm\"\n            >保存</el-button\n          >\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n  <div style=\"padding: 10px\">\n    <el-row>\n      <el-col :span=\"10\">\n        <el-table\n          :data=\"tableData\"\n          height=\"530\"\n          :default-sort=\"{ prop: 'id', order: 'ascending' }\"\n        >\n          <el-table-column prop=\"id\" label=\"食材ID\" width=\"120px\" sortable />\n          <el-table-column prop=\"name\" label=\"食材名\" />\n          <el-table-column label=\"操作\" width=\"200px\" align=\"center\">\n            <template #default=\"scope\">\n              <el-button size=\"mini\" @click=\"handleAdd(scope.row)\"\n                >添加</el-button\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-col>\n      <el-col :span=\"2\"><div /></el-col>\n      <el-col :span=\"12\">\n        <el-table\n          :data=\"usingData\"\n          height=\"530\"\n          :default-sort=\"{ prop: 'id', order: 'ascending' }\"\n        >\n          <el-table-column prop=\"id\" label=\"食材ID\" width=\"120px\" sortable />\n          <el-table-column prop=\"name\" label=\"食材名\" />\n          <el-table-column label=\"用量\" width=\"200px\" align=\"center\">\n            <template #default=\"scope\">\n              <el-input-number\n                v-model=\"scope.row.dosage\"\n                :precision=\"1\"\n                :step=\"0.1\"\n              />\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"200px\" align=\"center\">\n            <template #default=\"scope\">\n              <el-button size=\"mini\" @click=\"handleDelete(scope.row)\"\n                >删除</el-button\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport request from \"../../untils/request\";\n\nexport default {\n  name: \"addCuisine\",\n  data() {\n    return {\n      tableData: [],\n      usingData: [],\n      search: \"\",\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    goBack() {\n      this.$router.push(\"/manager/cuisineManage\");\n    },\n    find() {\n      request\n        .get(\"/ingredient/findList\", {\n          params: {\n            search: this.search,\n          },\n        })\n        .then((res) => {\n          this.tableData = res.data;\n        });\n    },\n    goBackConfirm() {\n      this.$confirm(\"未保存数据将丢失\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      }).then(() => {\n        this.goBack();\n      });\n    },\n    confirm() {\n      this.$confirm(\"请确定菜品名字, 确定后不建议修改\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.save();\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消保存\",\n          });\n        });\n    },\n    save() {\n      if (this.usingData.length === 0) {\n        this.$message({\n          type: \"error\",\n          message: \"菜品配方不可为空\",\n        });\n        return;\n      }\n      request.post(\"/cuisine/save\", this.form).then((res) => {\n        if (res.code === 0) {\n          this.$message({\n            type: \"success\",\n            message: \"新增成功\",\n          });\n          this.load();\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          });\n        }\n      });\n    },\n    load() {\n      request.get(\"/ingredient/viewList\").then((res) => {\n        this.tableData = res.data;\n      });\n    },\n    handleAdd(row) {\n      //删除左侧\n      let index = this.tableData.indexOf(row);\n      if (index > -1) this.tableData.splice(index, 1);\n      //添加dosage属性\n      row.dosage = 100; //初始化为100g\n      this.usingData.push(row);\n    },\n    handleDelete(row) {\n      let index = this.usingData.indexOf(row);\n      if (index > -1) this.usingData.splice(index, 1);\n      this.tableData.push(row);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n/deep/ .el-dialog {\n  background: #fcf9f4;\n}\n\n/deep/.el-form-item {\n  margin-bottom: 30px;\n}\n</style>\n<style lang=\"less\">\n.el-message-box {\n  background: #fcf9f4;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
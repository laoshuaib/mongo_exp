{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { defineComponent, inject, ref, computed, openBlock, createElementBlock, normalizeClass, unref, createElementVNode, withKeys, withModifiers, renderSlot, createTextVNode, toDisplayString, createVNode, withCtx, withDirectives, vShow } from 'vue';\nimport '../../../utils/index.mjs';\nimport _CollapseTransition from '../../collapse-transition/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { ArrowRight } from '@element-plus/icons-vue';\nimport '../../../hooks/index.mjs';\nimport '../../../tokens/index.mjs';\nimport { collapseItemProps } from './collapse-item.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { collapseContextKey } from '../../../tokens/collapse.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { generateId } from '../../../utils/rand.mjs';\nconst _hoisted_1 = [\"aria-expanded\", \"aria-controls\", \"aria-describedby\"];\nconst _hoisted_2 = [\"id\", \"tabindex\", \"onKeypress\"];\nconst _hoisted_3 = [\"id\", \"aria-hidden\", \"aria-labelledby\"];\nconst __default__ = {\n  name: \"ElCollapseItem\"\n};\n\nconst _sfc_main = /* @__PURE__ */defineComponent({ ...__default__,\n  props: collapseItemProps,\n\n  setup(__props, {\n    expose\n  }) {\n    const props = __props;\n    const collapse = inject(collapseContextKey);\n    const ns = useNamespace(\"collapse\");\n    const focusing = ref(false);\n    const isClick = ref(false);\n    const id = ref(generateId());\n    const isActive = computed(() => collapse == null ? void 0 : collapse.activeNames.value.includes(props.name));\n\n    const handleFocus = () => {\n      setTimeout(() => {\n        if (!isClick.value) {\n          focusing.value = true;\n        } else {\n          isClick.value = false;\n        }\n      }, 50);\n    };\n\n    const handleHeaderClick = () => {\n      if (props.disabled) return;\n      collapse == null ? void 0 : collapse.handleItemClick(props.name);\n      focusing.value = false;\n      isClick.value = true;\n    };\n\n    const handleEnterClick = () => {\n      collapse == null ? void 0 : collapse.handleItemClick(props.name);\n    };\n\n    expose({\n      isActive\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([unref(ns).b(\"item\"), unref(ns).is(\"active\", unref(isActive)), unref(ns).is(\"disabled\", _ctx.disabled)])\n      }, [createElementVNode(\"div\", {\n        role: \"tab\",\n        \"aria-expanded\": unref(isActive),\n        \"aria-controls\": unref(ns).b(`content-${id.value}`),\n        \"aria-describedby\": unref(ns).b(`content-${id.value}`)\n      }, [createElementVNode(\"div\", {\n        id: unref(ns).b(`head-${id.value}`),\n        class: normalizeClass([unref(ns).be(\"item\", \"header\"), unref(ns).is(\"active\", unref(isActive)), {\n          focusing: focusing.value && !_ctx.disabled\n        }]),\n        role: \"button\",\n        tabindex: _ctx.disabled ? -1 : 0,\n        onClick: handleHeaderClick,\n        onKeypress: withKeys(withModifiers(handleEnterClick, [\"stop\", \"prevent\"]), [\"space\", \"enter\"]),\n        onFocus: handleFocus,\n        onBlur: _cache[0] || (_cache[0] = $event => focusing.value = false)\n      }, [renderSlot(_ctx.$slots, \"title\", {}, () => [createTextVNode(toDisplayString(_ctx.title), 1)]), createVNode(unref(ElIcon), {\n        class: normalizeClass([unref(ns).be(\"item\", \"arrow\"), unref(ns).is(\"active\", unref(isActive))])\n      }, {\n        default: withCtx(() => [createVNode(unref(ArrowRight))]),\n        _: 1\n      }, 8, [\"class\"])], 42, _hoisted_2)], 8, _hoisted_1), createVNode(unref(_CollapseTransition), null, {\n        default: withCtx(() => [withDirectives(createElementVNode(\"div\", {\n          id: unref(ns).b(`content-${id.value}`),\n          class: normalizeClass(unref(ns).be(\"item\", \"wrap\")),\n          role: \"tabpanel\",\n          \"aria-hidden\": !unref(isActive),\n          \"aria-labelledby\": unref(ns).b(`head-${id.value}`)\n        }, [createElementVNode(\"div\", {\n          class: normalizeClass(unref(ns).be(\"item\", \"content\"))\n        }, [renderSlot(_ctx.$slots, \"default\")], 2)], 10, _hoisted_3), [[vShow, unref(isActive)]])]),\n        _: 3\n      })], 2);\n    };\n  }\n\n});\n\nvar CollapseItem = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue\"]]);\n\nexport { CollapseItem as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;IAmEA;IACA;IAEA;IACA;IACA;IAEA,gCACAA,iDACAC,KADA,CACAC,QADA,CACAC,UADA,CADA;;IAIA;MACAC;QACA;UACAC;QACA,CAFA,MAEA;UACAC;QACA;MAAA,CALA,EAMA,EANA;IAOA,CARA;;IAUA;MACA;MACAN;MACAK;MACAC;IACA,CALA;;IAOA;MACAN;IACA,CAFA;;IAIAO;MAEAC;IAFA","names":["collapse","value","includes","props","setTimeout","focusing","isClick","expose","isActive"],"sources":["../../../../../../packages/components/collapse/src/collapse-item.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      ns.b('item'),\n      ns.is('active', isActive),\n      ns.is('disabled', disabled),\n    ]\"\n  >\n    <div\n      role=\"tab\"\n      :aria-expanded=\"isActive\"\n      :aria-controls=\"ns.b(`content-${id}`)\"\n      :aria-describedby=\"ns.b(`content-${id}`)\"\n    >\n      <div\n        :id=\"ns.b(`head-${id}`)\"\n        :class=\"[\n          ns.be('item', 'header'),\n          ns.is('active', isActive),\n          { focusing: focusing && !disabled },\n        ]\"\n        role=\"button\"\n        :tabindex=\"disabled ? -1 : 0\"\n        @click=\"handleHeaderClick\"\n        @keypress.space.enter.stop.prevent=\"handleEnterClick\"\n        @focus=\"handleFocus\"\n        @blur=\"focusing = false\"\n      >\n        <slot name=\"title\">{{ title }}</slot>\n        <el-icon :class=\"[ns.be('item', 'arrow'), ns.is('active', isActive)]\">\n          <arrow-right />\n        </el-icon>\n      </div>\n    </div>\n    <el-collapse-transition>\n      <div\n        v-show=\"isActive\"\n        :id=\"ns.b(`content-${id}`)\"\n        :class=\"ns.be('item', 'wrap')\"\n        role=\"tabpanel\"\n        :aria-hidden=\"!isActive\"\n        :aria-labelledby=\"ns.b(`head-${id}`)\"\n      >\n        <div :class=\"ns.be('item', 'content')\">\n          <slot />\n        </div>\n      </div>\n    </el-collapse-transition>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject, ref } from 'vue'\nimport { generateId } from '@element-plus/utils'\nimport ElCollapseTransition from '@element-plus/components/collapse-transition'\nimport ElIcon from '@element-plus/components/icon'\nimport { ArrowRight } from '@element-plus/icons-vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { collapseContextKey } from '@element-plus/tokens'\nimport { collapseItemProps } from './collapse-item'\n\ndefineOptions({\n  name: 'ElCollapseItem',\n})\n\nconst props = defineProps(collapseItemProps)\n\nconst collapse = inject(collapseContextKey)\nconst ns = useNamespace('collapse')\n\nconst focusing = ref(false)\nconst isClick = ref(false)\nconst id = ref(generateId())\n\nconst isActive = computed(() =>\n  collapse?.activeNames.value.includes(props.name)\n)\n\nconst handleFocus = () => {\n  setTimeout(() => {\n    if (!isClick.value) {\n      focusing.value = true\n    } else {\n      isClick.value = false\n    }\n  }, 50)\n}\n\nconst handleHeaderClick = () => {\n  if (props.disabled) return\n  collapse?.handleItemClick(props.name)\n  focusing.value = false\n  isClick.value = true\n}\n\nconst handleEnterClick = () => {\n  collapse?.handleItemClick(props.name)\n}\n\ndefineExpose({\n  /** @description current collapse-item whether active */\n  isActive,\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}
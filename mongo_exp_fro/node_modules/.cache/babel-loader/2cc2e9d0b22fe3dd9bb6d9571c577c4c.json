{"ast":null,"code":"import { defineComponent, ref, reactive, computed, watch, nextTick, onMounted, onBeforeUnmount, toRefs, resolveComponent, openBlock, createBlock, Transition, withCtx, withDirectives, createVNode, createElementVNode, normalizeClass, normalizeStyle, withModifiers, createElementBlock, resolveDynamicComponent, createCommentVNode, toDisplayString, withKeys, renderSlot, createTextVNode, vShow } from 'vue';\nimport { ElButton } from '../../button/index.mjs';\nimport '../../../directives/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { ElInput } from '../../input/index.mjs';\nimport { ElOverlay } from '../../overlay/index.mjs';\nimport '../../../utils/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport '../../focus-trap/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport TrapFocus from '../../../directives/trap-focus/index.mjs';\nimport ElFocusTrap from '../../focus-trap/src/focus-trap.mjs';\nimport { TypeComponents, TypeComponentsMap } from '../../../utils/vue/icon.mjs';\nimport { isValidComponentSize } from '../../../utils/vue/validator.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useZIndex } from '../../../hooks/use-z-index/index.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nimport { useSize } from '../../../hooks/use-common-props/index.mjs';\nimport { useDraggable } from '../../../hooks/use-draggable/index.mjs';\nimport { useSameTarget } from '../../../hooks/use-same-target/index.mjs';\nimport { useLockscreen } from '../../../hooks/use-lockscreen/index.mjs';\nimport { useRestoreActive } from '../../../hooks/use-restore-active/index.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElMessageBox\",\n  directives: {\n    TrapFocus\n  },\n  components: {\n    ElButton,\n    ElFocusTrap,\n    ElInput,\n    ElOverlay,\n    ElIcon,\n    ...TypeComponents\n  },\n  inheritAttrs: false,\n  props: {\n    buttonSize: {\n      type: String,\n      validator: isValidComponentSize\n    },\n    modal: {\n      type: Boolean,\n      default: true\n    },\n    lockScroll: {\n      type: Boolean,\n      default: true\n    },\n    showClose: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClickModal: {\n      type: Boolean,\n      default: true\n    },\n    closeOnPressEscape: {\n      type: Boolean,\n      default: true\n    },\n    closeOnHashChange: {\n      type: Boolean,\n      default: true\n    },\n    center: Boolean,\n    draggable: Boolean,\n    roundButton: {\n      default: false,\n      type: Boolean\n    },\n    container: {\n      type: String,\n      default: \"body\"\n    },\n    boxType: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"vanish\", \"action\"],\n\n  setup(props, {\n    emit\n  }) {\n    const {\n      t\n    } = useLocale();\n    const ns = useNamespace(\"message-box\");\n    const visible = ref(false);\n    const {\n      nextZIndex\n    } = useZIndex();\n    const state = reactive({\n      autofocus: true,\n      beforeClose: null,\n      callback: null,\n      cancelButtonText: \"\",\n      cancelButtonClass: \"\",\n      confirmButtonText: \"\",\n      confirmButtonClass: \"\",\n      customClass: \"\",\n      customStyle: {},\n      dangerouslyUseHTMLString: false,\n      distinguishCancelAndClose: false,\n      icon: \"\",\n      inputPattern: null,\n      inputPlaceholder: \"\",\n      inputType: \"text\",\n      inputValue: null,\n      inputValidator: null,\n      inputErrorMessage: \"\",\n      message: null,\n      modalFade: true,\n      modalClass: \"\",\n      showCancelButton: false,\n      showConfirmButton: true,\n      type: \"\",\n      title: void 0,\n      showInput: false,\n      action: \"\",\n      confirmButtonLoading: false,\n      cancelButtonLoading: false,\n      confirmButtonDisabled: false,\n      editorErrorMessage: \"\",\n      validateError: false,\n      zIndex: nextZIndex()\n    });\n    const typeClass = computed(() => {\n      const type = state.type;\n      return {\n        [ns.bm(\"icon\", type)]: type && TypeComponentsMap[type]\n      };\n    });\n    const contentId = useId();\n    const inputId = useId();\n    const btnSize = useSize(computed(() => props.buttonSize), {\n      prop: true,\n      form: true,\n      formItem: true\n    });\n    const iconComponent = computed(() => state.icon || TypeComponentsMap[state.type] || \"\");\n    const hasMessage = computed(() => !!state.message);\n    const rootRef = ref();\n    const headerRef = ref();\n    const focusStartRef = ref();\n    const inputRef = ref();\n    const confirmRef = ref();\n    const confirmButtonClasses = computed(() => state.confirmButtonClass);\n    watch(() => state.inputValue, async val => {\n      await nextTick();\n\n      if (props.boxType === \"prompt\" && val !== null) {\n        validate();\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => visible.value, val => {\n      var _a, _b;\n\n      if (val) {\n        if (props.boxType !== \"prompt\") {\n          if (state.autofocus) {\n            focusStartRef.value = (_b = (_a = confirmRef.value) == null ? void 0 : _a.$el) != null ? _b : rootRef.value;\n          } else {\n            focusStartRef.value = rootRef.value;\n          }\n        }\n\n        state.zIndex = nextZIndex();\n      }\n\n      if (props.boxType !== \"prompt\") return;\n\n      if (val) {\n        nextTick().then(() => {\n          var _a2;\n\n          if (inputRef.value && inputRef.value.$el) {\n            if (state.autofocus) {\n              focusStartRef.value = (_a2 = getInputElement()) != null ? _a2 : rootRef.value;\n            } else {\n              focusStartRef.value = rootRef.value;\n            }\n          }\n        });\n      } else {\n        state.editorErrorMessage = \"\";\n        state.validateError = false;\n      }\n    });\n    const draggable = computed(() => props.draggable);\n    useDraggable(rootRef, headerRef, draggable);\n    onMounted(async () => {\n      await nextTick();\n\n      if (props.closeOnHashChange) {\n        window.addEventListener(\"hashchange\", doClose);\n      }\n    });\n    onBeforeUnmount(() => {\n      if (props.closeOnHashChange) {\n        window.removeEventListener(\"hashchange\", doClose);\n      }\n    });\n\n    function doClose() {\n      if (!visible.value) return;\n      visible.value = false;\n      nextTick(() => {\n        if (state.action) emit(\"action\", state.action);\n      });\n    }\n\n    const handleWrapperClick = () => {\n      if (props.closeOnClickModal) {\n        handleAction(state.distinguishCancelAndClose ? \"close\" : \"cancel\");\n      }\n    };\n\n    const overlayEvent = useSameTarget(handleWrapperClick);\n\n    const handleInputEnter = e => {\n      if (state.inputType !== \"textarea\") {\n        e.preventDefault();\n        return handleAction(\"confirm\");\n      }\n    };\n\n    const handleAction = action => {\n      var _a;\n\n      if (props.boxType === \"prompt\" && action === \"confirm\" && !validate()) {\n        return;\n      }\n\n      state.action = action;\n\n      if (state.beforeClose) {\n        (_a = state.beforeClose) == null ? void 0 : _a.call(state, action, state, doClose);\n      } else {\n        doClose();\n      }\n    };\n\n    const validate = () => {\n      if (props.boxType === \"prompt\") {\n        const inputPattern = state.inputPattern;\n\n        if (inputPattern && !inputPattern.test(state.inputValue || \"\")) {\n          state.editorErrorMessage = state.inputErrorMessage || t(\"el.messagebox.error\");\n          state.validateError = true;\n          return false;\n        }\n\n        const inputValidator = state.inputValidator;\n\n        if (typeof inputValidator === \"function\") {\n          const validateResult = inputValidator(state.inputValue);\n\n          if (validateResult === false) {\n            state.editorErrorMessage = state.inputErrorMessage || t(\"el.messagebox.error\");\n            state.validateError = true;\n            return false;\n          }\n\n          if (typeof validateResult === \"string\") {\n            state.editorErrorMessage = validateResult;\n            state.validateError = true;\n            return false;\n          }\n        }\n      }\n\n      state.editorErrorMessage = \"\";\n      state.validateError = false;\n      return true;\n    };\n\n    const getInputElement = () => {\n      const inputRefs = inputRef.value.$refs;\n      return inputRefs.input || inputRefs.textarea;\n    };\n\n    const handleClose = () => {\n      handleAction(\"close\");\n    };\n\n    const onCloseRequested = () => {\n      if (props.closeOnPressEscape) {\n        handleClose();\n      }\n    };\n\n    if (props.lockScroll) {\n      useLockscreen(visible);\n    }\n\n    useRestoreActive(visible);\n    return { ...toRefs(state),\n      ns,\n      overlayEvent,\n      visible,\n      hasMessage,\n      typeClass,\n      contentId,\n      inputId,\n      btnSize,\n      iconComponent,\n      confirmButtonClasses,\n      rootRef,\n      focusStartRef,\n      headerRef,\n      inputRef,\n      confirmRef,\n      doClose,\n      handleClose,\n      onCloseRequested,\n      handleWrapperClick,\n      handleInputEnter,\n      handleAction,\n      t\n    };\n  }\n\n});\n\nconst _hoisted_1 = [\"aria-label\", \"aria-describedby\"];\nconst _hoisted_2 = [\"aria-label\"];\nconst _hoisted_3 = [\"id\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = resolveComponent(\"el-icon\");\n\n  const _component_close = resolveComponent(\"close\");\n\n  const _component_el_input = resolveComponent(\"el-input\");\n\n  const _component_el_button = resolveComponent(\"el-button\");\n\n  const _component_el_focus_trap = resolveComponent(\"el-focus-trap\");\n\n  const _component_el_overlay = resolveComponent(\"el-overlay\");\n\n  return openBlock(), createBlock(Transition, {\n    name: \"fade-in-linear\",\n    onAfterLeave: _cache[11] || (_cache[11] = $event => _ctx.$emit(\"vanish\")),\n    persisted: \"\"\n  }, {\n    default: withCtx(() => [withDirectives(createVNode(_component_el_overlay, {\n      \"z-index\": _ctx.zIndex,\n      \"overlay-class\": [_ctx.ns.is(\"message-box\"), _ctx.modalClass],\n      mask: _ctx.modal\n    }, {\n      default: withCtx(() => [createElementVNode(\"div\", {\n        role: \"dialog\",\n        \"aria-label\": _ctx.title,\n        \"aria-modal\": \"true\",\n        \"aria-describedby\": !_ctx.showInput ? _ctx.contentId : void 0,\n        class: normalizeClass(`${_ctx.ns.namespace.value}-overlay-message-box`),\n        onClick: _cache[8] || (_cache[8] = (...args) => _ctx.overlayEvent.onClick && _ctx.overlayEvent.onClick(...args)),\n        onMousedown: _cache[9] || (_cache[9] = (...args) => _ctx.overlayEvent.onMousedown && _ctx.overlayEvent.onMousedown(...args)),\n        onMouseup: _cache[10] || (_cache[10] = (...args) => _ctx.overlayEvent.onMouseup && _ctx.overlayEvent.onMouseup(...args))\n      }, [createVNode(_component_el_focus_trap, {\n        loop: \"\",\n        trapped: _ctx.visible,\n        \"focus-trap-el\": _ctx.rootRef,\n        \"focus-start-el\": _ctx.focusStartRef,\n        onReleaseRequested: _ctx.onCloseRequested\n      }, {\n        default: withCtx(() => [createElementVNode(\"div\", {\n          ref: \"rootRef\",\n          class: normalizeClass([_ctx.ns.b(), _ctx.customClass, _ctx.ns.is(\"draggable\", _ctx.draggable), {\n            [_ctx.ns.m(\"center\")]: _ctx.center\n          }]),\n          style: normalizeStyle(_ctx.customStyle),\n          tabindex: \"-1\",\n          onClick: _cache[7] || (_cache[7] = withModifiers(() => {}, [\"stop\"]))\n        }, [_ctx.title !== null && _ctx.title !== void 0 ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          ref: \"headerRef\",\n          class: normalizeClass(_ctx.ns.e(\"header\"))\n        }, [createElementVNode(\"div\", {\n          class: normalizeClass(_ctx.ns.e(\"title\"))\n        }, [_ctx.iconComponent && _ctx.center ? (openBlock(), createBlock(_component_el_icon, {\n          key: 0,\n          class: normalizeClass([_ctx.ns.e(\"status\"), _ctx.typeClass])\n        }, {\n          default: withCtx(() => [(openBlock(), createBlock(resolveDynamicComponent(_ctx.iconComponent)))]),\n          _: 1\n        }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true), createElementVNode(\"span\", null, toDisplayString(_ctx.title), 1)], 2), _ctx.showClose ? (openBlock(), createElementBlock(\"button\", {\n          key: 0,\n          type: \"button\",\n          class: normalizeClass(_ctx.ns.e(\"headerbtn\")),\n          \"aria-label\": _ctx.t(\"el.messagebox.close\"),\n          onClick: _cache[0] || (_cache[0] = $event => _ctx.handleAction(_ctx.distinguishCancelAndClose ? \"close\" : \"cancel\")),\n          onKeydown: _cache[1] || (_cache[1] = withKeys(withModifiers($event => _ctx.handleAction(_ctx.distinguishCancelAndClose ? \"close\" : \"cancel\"), [\"prevent\"]), [\"enter\"]))\n        }, [createVNode(_component_el_icon, {\n          class: normalizeClass(_ctx.ns.e(\"close\"))\n        }, {\n          default: withCtx(() => [createVNode(_component_close)]),\n          _: 1\n        }, 8, [\"class\"])], 42, _hoisted_2)) : createCommentVNode(\"v-if\", true)], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n          id: _ctx.contentId,\n          class: normalizeClass(_ctx.ns.e(\"content\"))\n        }, [createElementVNode(\"div\", {\n          class: normalizeClass(_ctx.ns.e(\"container\"))\n        }, [_ctx.iconComponent && !_ctx.center && _ctx.hasMessage ? (openBlock(), createBlock(_component_el_icon, {\n          key: 0,\n          class: normalizeClass([_ctx.ns.e(\"status\"), _ctx.typeClass])\n        }, {\n          default: withCtx(() => [(openBlock(), createBlock(resolveDynamicComponent(_ctx.iconComponent)))]),\n          _: 1\n        }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true), _ctx.hasMessage ? (openBlock(), createElementBlock(\"div\", {\n          key: 1,\n          class: normalizeClass(_ctx.ns.e(\"message\"))\n        }, [renderSlot(_ctx.$slots, \"default\", {}, () => [!_ctx.dangerouslyUseHTMLString ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.showInput ? \"label\" : \"p\"), {\n          key: 0,\n          for: _ctx.showInput ? _ctx.inputId : void 0\n        }, {\n          default: withCtx(() => [createTextVNode(toDisplayString(!_ctx.dangerouslyUseHTMLString ? _ctx.message : \"\"), 1)]),\n          _: 1\n        }, 8, [\"for\"])) : (openBlock(), createBlock(resolveDynamicComponent(_ctx.showInput ? \"label\" : \"p\"), {\n          key: 1,\n          for: _ctx.showInput ? _ctx.inputId : void 0,\n          innerHTML: _ctx.message\n        }, null, 8, [\"for\", \"innerHTML\"]))])], 2)) : createCommentVNode(\"v-if\", true)], 2), withDirectives(createElementVNode(\"div\", {\n          class: normalizeClass(_ctx.ns.e(\"input\"))\n        }, [createVNode(_component_el_input, {\n          id: _ctx.inputId,\n          ref: \"inputRef\",\n          modelValue: _ctx.inputValue,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.inputValue = $event),\n          type: _ctx.inputType,\n          placeholder: _ctx.inputPlaceholder,\n          \"aria-invalid\": _ctx.validateError,\n          class: normalizeClass({\n            invalid: _ctx.validateError\n          }),\n          onKeydown: withKeys(_ctx.handleInputEnter, [\"enter\"])\n        }, null, 8, [\"id\", \"modelValue\", \"type\", \"placeholder\", \"aria-invalid\", \"class\", \"onKeydown\"]), createElementVNode(\"div\", {\n          class: normalizeClass(_ctx.ns.e(\"errormsg\")),\n          style: normalizeStyle({\n            visibility: !!_ctx.editorErrorMessage ? \"visible\" : \"hidden\"\n          })\n        }, toDisplayString(_ctx.editorErrorMessage), 7)], 2), [[vShow, _ctx.showInput]])], 10, _hoisted_3), createElementVNode(\"div\", {\n          class: normalizeClass(_ctx.ns.e(\"btns\"))\n        }, [_ctx.showCancelButton ? (openBlock(), createBlock(_component_el_button, {\n          key: 0,\n          loading: _ctx.cancelButtonLoading,\n          class: normalizeClass([_ctx.cancelButtonClass]),\n          round: _ctx.roundButton,\n          size: _ctx.btnSize,\n          onClick: _cache[3] || (_cache[3] = $event => _ctx.handleAction(\"cancel\")),\n          onKeydown: _cache[4] || (_cache[4] = withKeys(withModifiers($event => _ctx.handleAction(\"cancel\"), [\"prevent\"]), [\"enter\"]))\n        }, {\n          default: withCtx(() => [createTextVNode(toDisplayString(_ctx.cancelButtonText || _ctx.t(\"el.messagebox.cancel\")), 1)]),\n          _: 1\n        }, 8, [\"loading\", \"class\", \"round\", \"size\"])) : createCommentVNode(\"v-if\", true), withDirectives(createVNode(_component_el_button, {\n          ref: \"confirmRef\",\n          type: \"primary\",\n          loading: _ctx.confirmButtonLoading,\n          class: normalizeClass([_ctx.confirmButtonClasses]),\n          round: _ctx.roundButton,\n          disabled: _ctx.confirmButtonDisabled,\n          size: _ctx.btnSize,\n          onClick: _cache[5] || (_cache[5] = $event => _ctx.handleAction(\"confirm\")),\n          onKeydown: _cache[6] || (_cache[6] = withKeys(withModifiers($event => _ctx.handleAction(\"confirm\"), [\"prevent\"]), [\"enter\"]))\n        }, {\n          default: withCtx(() => [createTextVNode(toDisplayString(_ctx.confirmButtonText || _ctx.t(\"el.messagebox.confirm\")), 1)]),\n          _: 1\n        }, 8, [\"loading\", \"class\", \"round\", \"disabled\", \"size\"]), [[vShow, _ctx.showConfirmButton]])], 2)], 6)]),\n        _: 3\n      }, 8, [\"trapped\", \"focus-trap-el\", \"focus-start-el\", \"onReleaseRequested\"])], 42, _hoisted_1)]),\n      _: 3\n    }, 8, [\"z-index\", \"overlay-class\", \"mask\"]), [[vShow, _ctx.visible]])]),\n    _: 3\n  });\n}\n\nvar MessageBoxConstructor = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue\"]]);\n\nexport { MessageBoxConstructor as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAgMA,MAAKA,YAAaC,eAAa;EAC7BC,IAAM,gBADuB;EAE7BC,UAAY;IACVC;EADU,CAFiB;EAK7BC,UAAY;IACVC,QADU;IAEVC,WAFU;IAGVC,OAHU;IAIVC,SAJU;IAKVC,MALU;IAMV,GAAGC;EANO,CALiB;EAa7BC,YAAc,OAbe;EAc7BC,KAAO;IACLC,UAAY;MACVC,IAAM,QADI;MAEVC,SAAW;IAFD,CADP;IAKLC,KAAO;MACLF,IAAM,SADD;MAELG,OAAS;IAFJ,CALF;IASLC,UAAY;MACVJ,IAAM,SADI;MAEVG,OAAS;IAFC,CATP;IAaLE,SAAW;MACTL,IAAM,SADG;MAETG,OAAS;IAFA,CAbN;IAiBLG,iBAAmB;MACjBN,IAAM,SADW;MAEjBG,OAAS;IAFQ,CAjBd;IAqBLI,kBAAoB;MAClBP,IAAM,SADY;MAElBG,OAAS;IAFS,CArBf;IAyBLK,iBAAmB;MACjBR,IAAM,SADW;MAEjBG,OAAS;IAFQ,CAzBd;IA6BLM,MAAQ,SA7BH;IA8BLC,SAAW,SA9BN;IA+BLC,WAAa;MACXR,OAAS,OADE;MAEXH,IAAM;IAFK,CA/BR;IAmCLY,SAAW;MACTZ,IAAM,QADG;MAETG,OAAS;IAFA,CAnCN;IAuCLU,OAAS;MACPb,IAAM,QADC;MAEPG,OAAS;IAFF;EAvCJ,CAdsB;EA0D7BW,OAAO,CAAC,QAAD,EAAW,QAAX,CA1DsB;;EA2D7BC,MAAMjB,KAAN,EAAa;IAAEkB;EAAF,CAAb,EAAuB;IAEf;MAAEC;IAAF,IAAQC,SAAU,EAAlB;IACA,WAAKC,aAAa,aAAb,CAAL;IACA,gBAAUC,IAAI,KAAJ,CAAV;IACA;MAAEC;IAAF,IAAiBC,SAAU,EAA3B;IAEN,MAAMC,QAAQC,QAA0B;MAEtCC,SAAW,MAF2B;MAGtCC,WAAa,MAHyB;MAItCC,QAAU,MAJ4B;MAKtCC,gBAAkB,IALoB;MAMtCC,iBAAmB,IANmB;MAOtCC,iBAAmB,IAPmB;MAQtCC,kBAAoB,IARkB;MAStCC,WAAa,IATyB;MAUtCC,aAAa,EAVyB;MAWtCC,wBAA0B,OAXY;MAYtCC,yBAA2B,OAZW;MAatCC,IAAM,IAbgC;MActCC,YAAc,MAdwB;MAetCC,gBAAkB,IAfoB;MAgBtCC,SAAW,QAhB2B;MAiBtCC,UAAY,MAjB0B;MAkBtCC,cAAgB,MAlBsB;MAmBtCC,iBAAmB,IAnBmB;MAoBtCC,OAAS,MApB6B;MAqBtCC,SAAW,MArB2B;MAsBtCC,UAAY,IAtB0B;MAuBtCC,gBAAkB,OAvBoB;MAwBtCC,iBAAmB,MAxBmB;MAyBtC/C,IAAM,IAzBgC;MA0BtCgD,KAAO,QA1B+B;MA2BtCC,SAAW,OA3B2B;MA4BtCC,MAAQ,IA5B8B;MA6BtCC,oBAAsB,OA7BgB;MA8BtCC,mBAAqB,OA9BiB;MA+BtCC,qBAAuB,OA/Be;MAgCtCC,kBAAoB,IAhCkB;MAoCtCC,aAAe,OApCuB;MAqCtCC,QAAQnC,UAAW;IArCmB,EAAxC;IAwCM,kBAAYoC,SAAS,MAAM;MAC/B,MAAMzD,OAAOuB,KAAM,KAAnB;MACO;QAAE,CAACmC,EAAG,GAAH,CAAM,MAAN,EAAc1D,IAAd,CAAD,GAAuBA,IAAQ,sBAAkBA,IAAlB;MAAjC;IACR,CAHiB,CAAZ;IAKN,MAAM2D,YAAYC,KAAM,EAAxB;IACA,MAAMC,UAAUD,KAAM,EAAtB;IAEA,MAAME,OAAU,WACdL,QAAS,OAAM3D,MAAMC,UAAZ,CADK,EAEd;MAAEgE,MAAM,IAAR;MAAcC,MAAM,IAApB;MAA0BC,UAAU;IAApC,CAFc,CAAhB;IAKM,sBAAgBR,SACpB,MAAMlC,MAAMa,IAAN,IAAc8B,iBAAkB,OAAMlE,IAAN,CAAhC,IAA+C,EADjC,CAAhB;IAGN,MAAMmE,aAAaV,QAAS,OAAM,CAAC,CAAClC,MAAMoB,OAAd,CAA5B;IACA,MAAMyB,UAAUhD,GAAiB,EAAjC;IACA,MAAMiD,YAAYjD,GAAiB,EAAnC;IACA,MAAMkD,gBAAgBlD,GAAiB,EAAvC;IACA,MAAMmD,WAAWnD,GAA6B,EAA9C;IACA,MAAMoD,aAAapD,GAA6B,EAAhD;IAEA,MAAMqD,oBAAuB,YAAS,MAAMlD,MAAMQ,kBAArB,CAA7B;IAEA2C,MACE,MAAMnD,MAAMiB,UADd,EAEE,MAAOmC,GAAP,IAAe;MACb,MAAMC,QAAS,EAAf;;MACA,IAAI9E,KAAM,QAAN,KAAkB,QAAlB,IAA8B6E,QAAQ,IAA1C,EAAgD;QACrCE;MACX;IAEF,CARF,EAQE;MAAEC,SAAW;IAAb,CARF;IAWAJ,MACE,MAAMK,QAAQC,KADhB,EAEGL,GAAD,IAAS;MACP,IAAIM,EAAJ,EAASC,EAAT;;MACM;QACF,sBAAqB,QAArB,EAAqB;UACnB,qBAAsB;YACjBZ;UACL,CAFA,MAEA;YACFA;UACF;QACA;;QACF/C;MACA;;MAAgC,gCAChC;;MACW;QACPqD,QAAa,OAAb,CAAa;UACX;;UACgB,8BAAwB,MAAxB,CAAwBO,GAAxB,EAAwB;YACxC,IAAO5D,eAAP,EAAO;cACL+C,cAAcU,KAAd,GAAsB,CAAQI,uBAAR,KAAQ,IAAR,GAAQA,GAAR,GAAQhB,aAA9B;YACF,CAFA,MAEA;cACFE;YACD;UACI;QACL,CATE;MAUF,CAXS,MAWT;QACF/C;QAEJA;MAEA;IACa,CAhCb;IAkCA,eAAsB,kCAAtB;IACE8D,YAAe,+BAAf;IACAC,sBAA6B;MACpB;;MACT;QACDC;MAED;IACE,CANA;IAOSC;MACT;QACDD;MAEkB;IACjB,CALS;;IAKW;MACpB,YAAgB,MAAhB,EACA;MACER,OAAU,MAAV,GAAU,KAAV;MAAuBH;QACxB,kBACH5D;MAEA,CAJ2B;IAKzB;;IACe,wBAAkC;MACjD;QACFyE;MAEM;IAEA,CANW;;IAOX,kCAAgC,oBAAhC;;IACF,MAAEC,gBAAe;MACjB,SAAO,UAAP,KAA6B,UAA7B,EAA6B;QAC/BC;QACF;MAEM;IACJ,CANE;;IAOA;MACF;;MAEA,SAAe,QAAf,KAAe,QAAf,IAAezC,oBAAf,IAAe,WAAf,EAAe;QAEf;MACQ;;MACR3B,KAAO,OAAP,GAAO2B,MAAP;;MACU;QACV;MACF,CAFY,MAEZ;QAEA0C;MACM;IACF,CAdA;;IAeA;MACE,UAAM/E,OAAN,KACE,QADF,EACE;QACF,kBAAsB,qBAAtB;;QACO;UACTU;UACAA,sBAA6B,IAA7B;UACI;QACI;;QACN,MAAIkB,sBAA0B,eAA9B;;QACE,WACEA,cADF,KACE,UADF,EAC6B;UAC7B,oBAAsB,mCAAtB;;UACO;YACTlB;YACIA;YACF,OAA2B,KAA3B;UACA;;UACO;YACTA;YACFA;YACF;UACA;QACA;MACO;;MACTA;MAEAA,sBAAwB,KAAxB;MACQ;IACE,CA7BN;;IA8BJ;MAEA,kBAAoBgD,QAAM,MAAN,CAAMsB,KAA1B;MACE,gBAAoB,MAApB,IAAoBC,kBAApB;IACF,CAJA;;IAYA,MAAMC,oBAAyB;MAC7BN,YAA8B,SAA9B;IACc,CAFhB;;IAGE;MACF;QAGIM,WAAkB;MACpB;IACF,CANE;;IASF,sBAAwB;MAEjBC;IACL;;IACAC;IACA,SACA,gBADA;MAEAvC,EAFA;MAGAwC,YAHA;MAIAnB,OAJA;MAKAZ,UALA;MAMAgC,SANA;MAOAxC,SAPA;MAQAE,OARA;MASAC,OATA;MAUAsC,aAVA;MAWA3B,oBAXA;MAYAL,OAZA;MAaAE,aAbA;MAcAD,SAdA;MAeAE,QAfA;MAgBAC,UAhBA;MAiBAoB,OAjBA;MAkBAG,WAlBA;MAmBAM,gBAnBA;MAoBAC,kBApBA;MAqBFZ,gBArBE;MAsBJD,YAtBI;MAuBLxE;IAvBK;;;AAhSyB,EAA/B;;;;;;;;;;;;;4BA9Ce;;EAAA,MAjJIsF,4DAiJJ;;EAjJsB;;EAAnC;IAAApH;wBAgJe,qDAhJf;IAgJeqH;EAhJf,GAgJe;IA7IDrG,OACI,gBAAM,CAA6BsG,cAC1C;MAAA;wBAEPC,IAwIM,GAxIN,CAwIMC,EAxIN,CAwIM,aAxIN,GAwIMD,gBA1IC;MA0IDE;IA1IC,GA0ID;MAvICzG,OACQ,mCACF;QACV0G,cADU;QAEV,cAAKH,UAFK;QAGV,cAAK,MAHK;QAIV,oBAAS,mCAAe,MAJd;QAKVI,KAAO,kEALG;QAKqBC,gHALrB;QAOXC,WA6HgB,iHApIL;QAQTC;MARS,GAQT,CACUC,WACM;QACfC,IAAgB,IADD;QAEfC,OAAmB,cAFJ;QAEI,6BAFJ;0BAIhBV,IAqHM,cAzHU;QAyHVW;MAzHU,GAyHV;QApHAlH,OACE,mCAAsB;UAAkBiB,cAAlB;UAA6C0F,qBAAK,EAA2CJ,WAA3C,EAAkEA,gBAAlE,EAM7EA,KAAKhD,EAAL,CAAKiD,EAAL,CAAK,WAAL,EAAkBD,cAAlB,CAN6E,EAOrE;YAAA;UAAA,CAPqE,EAAlD;UAQdY,uCARc;UAQdC,cARc;UAWpBR,OAAK,gBAAaS,MAAU,GAAV,GAAUC,qBA6B9B,CA7B8B,EA6B9B,QA7B8B,CAAvB;QAXe,IAazBf,eAAO,IAAP,IAAOA,eAAI,MAAX,IAAWgB;UAAAC;UAEZvG,GAQM,aAVM;UAEN0F,qBAAO,WAAG,QAAH;QAFD,GAEK,CAEPc;UAIEd;QAJF,GACL,CAAiCJ;gBAAA;UAElCI;QAFkC,GAEL;2GAAA;UAEjBe;QAFiB,CAFK,EAO9B,CAP8B,EAO9B,SAP8B,KAO9BC,kBAcC,cArBJ,EAqBIF,gEArBJ,CADK,EASH,CATG,CAFO,EAYdlB,kBAAOgB,+BAAI;UACXC,MADW;UAEX3H,cAFW;UAKX8G,qBAA0C,wBAL/B;qDAAA;UASZC,OAEU,6GAXE;UASFgB,SAAK,EAAEP,0BAAIQ,iIAAJ;QATL,GASS,iCACV;UAAAlB;QAAA;iEAAA;;QAAA,GAkDT,aAnDmB,CATT,EAcN,EAdM,EAcNmB,UAdM,CAAX,IAcKH,gCA1BS,CAFL,EA4BQ,CA5BR,CAAX,IA4BwBA,kBAAE,SAAI,IAAJ,GAAIF;UAC/BM,EAwBM,gBAzByB;UACzBpB,qBAAO,WAAG,SAAH;QADkB,GACd,mBAEM,QAAe;UAI1BA;QAJ0B,CAAf,EAClB,CAAiCJ;gBAAA;UAElCI;QAFkC,GAEL;2GAAA;UAkBzBe;QAlByB,CAFK,EAIP,CAJO,EAIP,SAJO,KAIPC,kBAAM,cAJhC,EAIgCpB;UACjCiB,MADiC;UAItBb;QAJsB,GAGf,CAEbqB,mCAA2B,EAA3BA,EAA2B;gBAAA;UAEkBC,qCAA1C;QAFwB,GAEU;kCAExCC,iEACO3B,IAAS,QADhB,GACgB,EADhB,GACgB,CADhB,GAFwC;UAKrCmB;QALqC,CAFV,EAQpB,CARoB,EAQpB,OARoB,MAQpBH;UAAAC;qDAAA;;QAAA,iCARoB,EAA3BQ,CAFa,CAHe,EAkBZ,CAlBY,KAkBLL,2BAAI,IAAJ,CAtB3B,CADkB,EAuBa,CAvBb,CAFN,gBAmCb;UAAAhB,KARK;QAQL,GARK,CAEII;UAAUgB,gBAAV;UACR9G,GAAM,YADE;UAERkH,UAAa,iBAFL;UAGR,uBAAcd,6DAHN;UAIRxH,oBAJQ;UAKRuI,WAAO,uBALC;UAKuB,kCALvB;UAcLzB;YAAA0B;UAAA,EAdK;UAQRT,SAAO,kCAAI,SAAJ;QARC,GASH,IATG,EASH,CATG,EASH,iFATG,CAFJ,EAWCH,kBAAwD;UAAAd;+BAIzC;YAAA2B;UAAA;QAJyC,GAb5CC,wCAa4C,EAb5C,CAa4C,CAXzD,CAQL,OAqCA,wBArCA,CAnCa,CADc,EA+ChB,EA/CgB,EA+ChBC,UA/CgB,GAiDvBf;UASId;QATJ,IAELJ,kCAAyB;UACzBiB,GAAO,GADkB;UAEzBiB,OAAM,0BAFmB;UAGzB9B,+CAHyB;UAIzB+B,WAAO,YAJkB;UAIUC,kBAJV;iCAMyBtB,kDANzB;UAMyBO,2DAA5B,CAACgB,qCAAD,EAAC,WAAD,CAA4B,EAA3B,SAA2B;QANzB,GAMF;gIAAA;UAIxBlB,CAAI;QAJoB,CANE,EAWrB,CAXqB,EAWrB,qCAXqB,CAAzB,IAWIC,gDACK;UACT1G,iBADS;UAETpB,IAAO,WAFE;UAGT4I,OAAU,2BAHD;UAIT9B,KAAM,6CAJG;UAKT+B,uBALS;UAMTG,oCANS;UAM0BF,kBAN1B;iCAQ2CtB,mDAR3C;UAQ2CO,4DAA5BgB,MAAD,IAACrC,4BAA4B,EAA5B,WAA4B,GAA5B,SAA4B;QAR3C,GAQe;kIAAA;UAXAmB;QAWA,CARf,4FAdJ,KA1FkB,IAAtB,EAmHF;;MAAA,CAzHU,0EAFhB,CARS,iBADE,EAsIT;MA7ISA;IA6IT,CA1IC,oEADa,CAAN,CA4IH;;EAAA,CAhJf","names":["_sfc_main","defineComponent","name","directives","TrapFocus","components","ElButton","ElFocusTrap","ElInput","ElOverlay","ElIcon","TypeComponents","inheritAttrs","props","buttonSize","type","validator","modal","default","lockScroll","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange","center","draggable","roundButton","container","boxType","emits","setup","emit","t","useLocale","useNamespace","ref","nextZIndex","useZIndex","state","reactive","autofocus","beforeClose","callback","cancelButtonText","cancelButtonClass","confirmButtonText","confirmButtonClass","customClass","customStyle","dangerouslyUseHTMLString","distinguishCancelAndClose","icon","inputPattern","inputPlaceholder","inputType","inputValue","inputValidator","inputErrorMessage","message","modalFade","modalClass","showCancelButton","showConfirmButton","title","showInput","action","confirmButtonLoading","cancelButtonLoading","confirmButtonDisabled","editorErrorMessage","validateError","zIndex","computed","ns","contentId","useId","inputId","btnSize","prop","form","formItem","TypeComponentsMap","hasMessage","rootRef","headerRef","focusStartRef","inputRef","confirmRef","confirmButtonClasses","watch","val","nextTick","validate","immediate","visible","value","_a","_b","$el","_a2","useDraggable","onMounted","window","onBeforeUnmount","handleAction","handleInputEnter","e","doClose","$refs","inputRefs","handleClose","useLockscreen","useRestoreActive","overlayEvent","typeClass","iconComponent","onCloseRequested","handleWrapperClick","_component_el_focus_trap","persisted","_withDirectives","_ctx","is","mask","role","class","onClick","onMousedown","onMouseup","_createVNode","loop","trapped","onReleaseRequested","style","tabindex","_cache","_withModifiers","_openBlock","key","_createElementVNode","_","_createCommentVNode","onKeydown","_withKeys","_hoisted_2","id","_renderSlot","for","_createTextVNode","modelValue","placeholder","invalid","visibility","_toDisplayString","_hoisted_3","loading","round","size","$event","disabled"],"sources":["../../../../../../packages/components/message-box/src/index.vue"],"sourcesContent":["<template>\n  <transition name=\"fade-in-linear\" @after-leave=\"$emit('vanish')\">\n    <el-overlay\n      v-show=\"visible\"\n      :z-index=\"zIndex\"\n      :overlay-class=\"[ns.is('message-box'), modalClass]\"\n      :mask=\"modal\"\n    >\n      <div\n        role=\"dialog\"\n        :aria-label=\"title\"\n        aria-modal=\"true\"\n        :aria-describedby=\"!showInput ? contentId : undefined\"\n        :class=\"`${ns.namespace.value}-overlay-message-box`\"\n        @click=\"overlayEvent.onClick\"\n        @mousedown=\"overlayEvent.onMousedown\"\n        @mouseup=\"overlayEvent.onMouseup\"\n      >\n        <el-focus-trap\n          loop\n          :trapped=\"visible\"\n          :focus-trap-el=\"rootRef\"\n          :focus-start-el=\"focusStartRef\"\n          @release-requested=\"onCloseRequested\"\n        >\n          <div\n            ref=\"rootRef\"\n            :class=\"[\n              ns.b(),\n              customClass,\n              ns.is('draggable', draggable),\n              { [ns.m('center')]: center },\n            ]\"\n            :style=\"customStyle\"\n            tabindex=\"-1\"\n            @click.stop=\"\"\n          >\n            <div\n              v-if=\"title !== null && title !== undefined\"\n              ref=\"headerRef\"\n              :class=\"ns.e('header')\"\n            >\n              <div :class=\"ns.e('title')\">\n                <el-icon\n                  v-if=\"iconComponent && center\"\n                  :class=\"[ns.e('status'), typeClass]\"\n                >\n                  <component :is=\"iconComponent\" />\n                </el-icon>\n                <span>{{ title }}</span>\n              </div>\n              <button\n                v-if=\"showClose\"\n                type=\"button\"\n                :class=\"ns.e('headerbtn')\"\n                :aria-label=\"t('el.messagebox.close')\"\n                @click=\"\n                  handleAction(distinguishCancelAndClose ? 'close' : 'cancel')\n                \"\n                @keydown.prevent.enter=\"\n                  handleAction(distinguishCancelAndClose ? 'close' : 'cancel')\n                \"\n              >\n                <el-icon :class=\"ns.e('close')\">\n                  <close />\n                </el-icon>\n              </button>\n            </div>\n            <div :id=\"contentId\" :class=\"ns.e('content')\">\n              <div :class=\"ns.e('container')\">\n                <el-icon\n                  v-if=\"iconComponent && !center && hasMessage\"\n                  :class=\"[ns.e('status'), typeClass]\"\n                >\n                  <component :is=\"iconComponent\" />\n                </el-icon>\n                <div v-if=\"hasMessage\" :class=\"ns.e('message')\">\n                  <slot>\n                    <component\n                      :is=\"showInput ? 'label' : 'p'\"\n                      v-if=\"!dangerouslyUseHTMLString\"\n                      :for=\"showInput ? inputId : undefined\"\n                    >\n                      {{ !dangerouslyUseHTMLString ? message : '' }}\n                    </component>\n                    <component\n                      :is=\"showInput ? 'label' : 'p'\"\n                      v-else\n                      :for=\"showInput ? inputId : undefined\"\n                      v-html=\"message\"\n                    />\n                  </slot>\n                </div>\n              </div>\n              <div v-show=\"showInput\" :class=\"ns.e('input')\">\n                <el-input\n                  :id=\"inputId\"\n                  ref=\"inputRef\"\n                  v-model=\"inputValue\"\n                  :type=\"inputType\"\n                  :placeholder=\"inputPlaceholder\"\n                  :aria-invalid=\"validateError\"\n                  :class=\"{ invalid: validateError }\"\n                  @keydown.enter=\"handleInputEnter\"\n                />\n                <div\n                  :class=\"ns.e('errormsg')\"\n                  :style=\"{\n                    visibility: !!editorErrorMessage ? 'visible' : 'hidden',\n                  }\"\n                >\n                  {{ editorErrorMessage }}\n                </div>\n              </div>\n            </div>\n            <div :class=\"ns.e('btns')\">\n              <el-button\n                v-if=\"showCancelButton\"\n                :loading=\"cancelButtonLoading\"\n                :class=\"[cancelButtonClass]\"\n                :round=\"roundButton\"\n                :size=\"btnSize\"\n                @click=\"handleAction('cancel')\"\n                @keydown.prevent.enter=\"handleAction('cancel')\"\n              >\n                {{ cancelButtonText || t('el.messagebox.cancel') }}\n              </el-button>\n              <el-button\n                v-show=\"showConfirmButton\"\n                ref=\"confirmRef\"\n                type=\"primary\"\n                :loading=\"confirmButtonLoading\"\n                :class=\"[confirmButtonClasses]\"\n                :round=\"roundButton\"\n                :disabled=\"confirmButtonDisabled\"\n                :size=\"btnSize\"\n                @click=\"handleAction('confirm')\"\n                @keydown.prevent.enter=\"handleAction('confirm')\"\n              >\n                {{ confirmButtonText || t('el.messagebox.confirm') }}\n              </el-button>\n            </div>\n          </div>\n        </el-focus-trap>\n      </div>\n    </el-overlay>\n  </transition>\n</template>\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  toRefs,\n  watch,\n} from 'vue'\nimport ElButton from '@element-plus/components/button'\nimport { TrapFocus } from '@element-plus/directives'\nimport {\n  useDraggable,\n  useId,\n  useLocale,\n  useLockscreen,\n  useNamespace,\n  useRestoreActive,\n  useSameTarget,\n  useSize,\n  useZIndex,\n} from '@element-plus/hooks'\nimport ElInput from '@element-plus/components/input'\nimport { ElOverlay } from '@element-plus/components/overlay'\nimport {\n  TypeComponents,\n  TypeComponentsMap,\n  isValidComponentSize,\n} from '@element-plus/utils'\nimport { ElIcon } from '@element-plus/components/icon'\nimport ElFocusTrap from '@element-plus/components/focus-trap'\n\nimport type { ComponentPublicInstance, PropType } from 'vue'\nimport type { ComponentSize } from '@element-plus/constants'\nimport type {\n  Action,\n  MessageBoxState,\n  MessageBoxType,\n} from './message-box.type'\n\nexport default defineComponent({\n  name: 'ElMessageBox',\n  directives: {\n    TrapFocus,\n  },\n  components: {\n    ElButton,\n    ElFocusTrap,\n    ElInput,\n    ElOverlay,\n    ElIcon,\n    ...TypeComponents,\n  },\n  inheritAttrs: false,\n  props: {\n    buttonSize: {\n      type: String as PropType<ComponentSize>,\n      validator: isValidComponentSize,\n    },\n    modal: {\n      type: Boolean,\n      default: true,\n    },\n    lockScroll: {\n      type: Boolean,\n      default: true,\n    },\n    showClose: {\n      type: Boolean,\n      default: true,\n    },\n    closeOnClickModal: {\n      type: Boolean,\n      default: true,\n    },\n    closeOnPressEscape: {\n      type: Boolean,\n      default: true,\n    },\n    closeOnHashChange: {\n      type: Boolean,\n      default: true,\n    },\n    center: Boolean,\n    draggable: Boolean,\n    roundButton: {\n      default: false,\n      type: Boolean,\n    },\n    container: {\n      type: String, // default append to body\n      default: 'body',\n    },\n    boxType: {\n      type: String as PropType<MessageBoxType>,\n      default: '',\n    },\n  },\n  emits: ['vanish', 'action'],\n  setup(props, { emit }) {\n    // const popup = usePopup(props, doClose)\n    const { t } = useLocale()\n    const ns = useNamespace('message-box')\n    const visible = ref(false)\n    const { nextZIndex } = useZIndex()\n    // s represents state\n    const state = reactive<MessageBoxState>({\n      // autofocus element when open message-box\n      autofocus: true,\n      beforeClose: null,\n      callback: null,\n      cancelButtonText: '',\n      cancelButtonClass: '',\n      confirmButtonText: '',\n      confirmButtonClass: '',\n      customClass: '',\n      customStyle: {},\n      dangerouslyUseHTMLString: false,\n      distinguishCancelAndClose: false,\n      icon: '',\n      inputPattern: null,\n      inputPlaceholder: '',\n      inputType: 'text',\n      inputValue: null,\n      inputValidator: null,\n      inputErrorMessage: '',\n      message: null,\n      modalFade: true,\n      modalClass: '',\n      showCancelButton: false,\n      showConfirmButton: true,\n      type: '',\n      title: undefined,\n      showInput: false,\n      action: '' as Action,\n      confirmButtonLoading: false,\n      cancelButtonLoading: false,\n      confirmButtonDisabled: false,\n      editorErrorMessage: '',\n      // refer to: https://github.com/ElemeFE/element/commit/2999279ae34ef10c373ca795c87b020ed6753eed\n      // seemed ok for now without this state.\n      // isOnComposition: false, // temporary remove\n      validateError: false,\n      zIndex: nextZIndex(),\n    })\n\n    const typeClass = computed(() => {\n      const type = state.type\n      return { [ns.bm('icon', type)]: type && TypeComponentsMap[type] }\n    })\n\n    const contentId = useId()\n    const inputId = useId()\n\n    const btnSize = useSize(\n      computed(() => props.buttonSize),\n      { prop: true, form: true, formItem: true }\n    )\n\n    const iconComponent = computed(\n      () => state.icon || TypeComponentsMap[state.type] || ''\n    )\n    const hasMessage = computed(() => !!state.message)\n    const rootRef = ref<HTMLElement>()\n    const headerRef = ref<HTMLElement>()\n    const focusStartRef = ref<HTMLElement>()\n    const inputRef = ref<ComponentPublicInstance>()\n    const confirmRef = ref<ComponentPublicInstance>()\n\n    const confirmButtonClasses = computed(() => state.confirmButtonClass)\n\n    watch(\n      () => state.inputValue,\n      async (val) => {\n        await nextTick()\n        if (props.boxType === 'prompt' && val !== null) {\n          validate()\n        }\n      },\n      { immediate: true }\n    )\n\n    watch(\n      () => visible.value,\n      (val) => {\n        if (val) {\n          if (props.boxType !== 'prompt') {\n            if (state.autofocus) {\n              focusStartRef.value = confirmRef.value?.$el ?? rootRef.value\n            } else {\n              focusStartRef.value = rootRef.value\n            }\n          }\n          state.zIndex = nextZIndex()\n        }\n        if (props.boxType !== 'prompt') return\n        if (val) {\n          nextTick().then(() => {\n            if (inputRef.value && inputRef.value.$el) {\n              if (state.autofocus) {\n                focusStartRef.value = getInputElement() ?? rootRef.value\n              } else {\n                focusStartRef.value = rootRef.value\n              }\n            }\n          })\n        } else {\n          state.editorErrorMessage = ''\n          state.validateError = false\n        }\n      }\n    )\n\n    const draggable = computed(() => props.draggable)\n    useDraggable(rootRef, headerRef, draggable)\n\n    onMounted(async () => {\n      await nextTick()\n      if (props.closeOnHashChange) {\n        window.addEventListener('hashchange', doClose)\n      }\n    })\n\n    onBeforeUnmount(() => {\n      if (props.closeOnHashChange) {\n        window.removeEventListener('hashchange', doClose)\n      }\n    })\n\n    function doClose() {\n      if (!visible.value) return\n      visible.value = false\n      nextTick(() => {\n        if (state.action) emit('action', state.action)\n      })\n    }\n\n    const handleWrapperClick = () => {\n      if (props.closeOnClickModal) {\n        handleAction(state.distinguishCancelAndClose ? 'close' : 'cancel')\n      }\n    }\n\n    const overlayEvent = useSameTarget(handleWrapperClick)\n\n    const handleInputEnter = (e: KeyboardEvent) => {\n      if (state.inputType !== 'textarea') {\n        e.preventDefault()\n        return handleAction('confirm')\n      }\n    }\n\n    const handleAction = (action: Action) => {\n      if (props.boxType === 'prompt' && action === 'confirm' && !validate()) {\n        return\n      }\n\n      state.action = action\n\n      if (state.beforeClose) {\n        state.beforeClose?.(action, state, doClose)\n      } else {\n        doClose()\n      }\n    }\n\n    const validate = () => {\n      if (props.boxType === 'prompt') {\n        const inputPattern = state.inputPattern\n        if (inputPattern && !inputPattern.test(state.inputValue || '')) {\n          state.editorErrorMessage =\n            state.inputErrorMessage || t('el.messagebox.error')\n          state.validateError = true\n          return false\n        }\n        const inputValidator = state.inputValidator\n        if (typeof inputValidator === 'function') {\n          const validateResult = inputValidator(state.inputValue)\n          if (validateResult === false) {\n            state.editorErrorMessage =\n              state.inputErrorMessage || t('el.messagebox.error')\n            state.validateError = true\n            return false\n          }\n          if (typeof validateResult === 'string') {\n            state.editorErrorMessage = validateResult\n            state.validateError = true\n            return false\n          }\n        }\n      }\n      state.editorErrorMessage = ''\n      state.validateError = false\n      return true\n    }\n\n    const getInputElement = () => {\n      const inputRefs = inputRef.value.$refs\n      return (inputRefs.input || inputRefs.textarea) as HTMLElement\n    }\n\n    const handleClose = () => {\n      handleAction('close')\n    }\n\n    // when close on press escape is disabled, pressing esc should not callout\n    // any other message box and close any other dialog-ish elements\n    // e.g. Dialog has a close on press esc feature, and when it closes, it calls\n    // props.beforeClose method to make a intermediate state by callout a message box\n    // for some verification or alerting. then if we allow global event liek this\n    // to dispatch, it could callout another message box.\n    const onCloseRequested = () => {\n      if (props.closeOnPressEscape) {\n        handleClose()\n      }\n    }\n\n    // locks the screen to prevent scroll\n    if (props.lockScroll) {\n      useLockscreen(visible)\n    }\n\n    // restore to prev active element.\n    useRestoreActive(visible)\n\n    return {\n      ...toRefs(state),\n      ns,\n      overlayEvent,\n      visible,\n      hasMessage,\n      typeClass,\n      contentId,\n      inputId,\n      btnSize,\n      iconComponent,\n      confirmButtonClasses,\n      rootRef,\n      focusStartRef,\n      headerRef,\n      inputRef,\n      confirmRef,\n      doClose, // for outside usage\n      handleClose, // for out side usage\n      onCloseRequested,\n      handleWrapperClick,\n      handleInputEnter,\n      handleAction,\n      t,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}
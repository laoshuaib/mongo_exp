{"ast":null,"code":"import request from \"../../untils/request\";\nexport default {\n  name: \"userLogin\",\n\n  data() {\n    return {\n      bg: require(\"../assets/basealt.jpg\"),\n      form: {},\n      rules: {\n        number: [{\n          required: true,\n          message: \"请输入学号或工号\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n\n  created() {\n    sessionStorage.removeItem(\"user\");\n  },\n\n  methods: {\n    login() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          console.log(this.form);\n          request.post(\"/user/login\", this.form).then(res => {\n            if (res.code === \"0\") {\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\"\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n\n              if (res.data.identity === \"学生\") {\n                this.$router.push(\"/addclass\"); //学生登录成功页面跳转\n              } else {\n                this.$router.push(\"/addlesson\"); //老师登录成功页面跳转\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              });\n            }\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAgDA,OAAOA,OAAP,MAAoB,sBAApB;AAEA,eAAe;EACbC,IAAI,EAAE,WADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,EAAE,EAAEC,OAAO,CAAC,uBAAD,CADN;MAELC,IAAI,EAAE,EAFD;MAGLC,KAAK,EAAE;QACLC,MAAM,EAAE,CACN;UACEC,QAAQ,EAAE,IADZ;UAEEC,OAAO,EAAE,UAFX;UAGEC,OAAO,EAAE;QAHX,CADM,CADH;QAQLC,QAAQ,EAAE,CACR;UACEH,QAAQ,EAAE,IADZ;UAEEC,OAAO,EAAE,OAFX;UAGEC,OAAO,EAAE;QAHX,CADQ;MARL;IAHF,CAAP;EAoBD,CAvBY;;EAyBbE,OAAO,GAAG;IACRC,cAAc,CAACC,UAAf,CAA0B,MAA1B;EACD,CA3BY;;EA4BbC,OAAO,EAAE;IACPC,KAAK,GAAG;MACN,KAAKC,KAAL,CAAW,MAAX,EAAmBC,QAAnB,CAA6BC,KAAD,IAAW;QACrC,IAAIA,KAAJ,EAAW;UACTC,OAAO,CAACC,GAAR,CAAY,KAAKhB,IAAjB;UACAL,OAAO,CAACsB,IAAR,CAAa,aAAb,EAA4B,KAAKjB,IAAjC,EAAuCkB,IAAvC,CAA6CC,GAAD,IAAS;YACnD,IAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;cACpB,KAAKC,QAAL,CAAc;gBACZC,IAAI,EAAE,SADM;gBAEZlB,OAAO,EAAE;cAFG,CAAd;cAIAI,cAAc,CAACe,OAAf,CAAuB,MAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACtB,IAAnB,CAA/B,EALoB,CAKsC;;cAC1D,IAAIsB,GAAG,CAACtB,IAAJ,CAAS6B,QAAT,KAAsB,IAA1B,EAAgC;gBAC9B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,WAAlB,EAD8B,CACE;cAClC,CAFA,MAEO;gBACL,KAAKD,OAAL,CAAaC,IAAb,CAAkB,YAAlB,EADK,CAC4B;cACnC;YACF,CAXA,MAWO;cACL,KAAKP,QAAL,CAAc;gBACZC,IAAI,EAAE,OADM;gBAEZlB,OAAO,EAAEe,GAAG,CAACU;cAFD,CAAd;YAIF;UACD,CAlBD;QAmBF;MACD,CAvBD;IAwBD;;EA1BM;AA5BI,CAAf","names":["request","name","data","bg","require","form","rules","number","required","message","trigger","password","created","sessionStorage","removeItem","methods","login","$refs","validate","valid","console","log","post","then","res","code","$message","type","setItem","JSON","stringify","identity","$router","push","msg"],"sourceRoot":"","sources":["C:\\Users\\laoshuaib\\Desktop\\restaurant\\src\\views\\userLogin.vue"],"sourcesContent":["<!--suppress CssUnusedSymbol -->\n<template>\n  <div\n    :style=\"{\n      width: '100%',\n      height: '100vh',\n      overflow: 'hidden',\n      background: 'url(' + bg + ')',\n      backgroundSize: 'cover',\n    }\"\n  >\n    <div style=\"width: 400px; margin: 150px auto\">\n      <div\n        style=\"\n          color: #cccccc;\n          font-size: 30px;\n          text-align: center;\n          padding: 30px 0;\n        \"\n      >\n        登录\n      </div>\n      <el-form ref=\"form\" :model=\"form\" size=\"default\" :rules=\"rules\">\n        <el-form-item prop=\"number\">\n          <el-input prefix-icon=\"Avatar\" v-model=\"form.number\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            prefix-icon=\"Lock\"\n            v-model=\"form.password\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            style=\"width: 100%\"\n            type=\"primary\"\n            @click=\"login\"\n            size=\"large\"\n            >登录</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"../../untils/request\";\n\nexport default {\n  name: \"userLogin\",\n  data() {\n    return {\n      bg: require(\"../assets/basealt.jpg\"),\n      form: {},\n      rules: {\n        number: [\n          {\n            required: true,\n            message: \"请输入学号或工号\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n\n  created() {\n    sessionStorage.removeItem(\"user\");\n  },\n  methods: {\n    login() {\n      this.$refs[\"form\"].validate((valid) => {\n        if (valid) {\n          console.log(this.form);\n          request.post(\"/user/login\", this.form).then((res) => {\n            if (res.code === \"0\") {\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\",\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n              if (res.data.identity === \"学生\") {\n                this.$router.push(\"/addclass\"); //学生登录成功页面跳转\n              } else {\n                this.$router.push(\"/addlesson\"); //老师登录成功页面跳转\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg,\n              });\n            }\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style>\n.el-input__wrapper {\n  height: 47px;\n  background-color: rgba(255, 255, 255, 0.247);\n}\n.el-input__wrapper input {\n  color: #fff !important;\n}\n.el-form-item {\n\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import request from \"../../untils/request\";\nexport default {\n  name: \"userLogin\",\n\n  data() {\n    return {\n      bg: require(\"../assets/basealt.jpg\"),\n      form: {},\n      rules: {\n        number: [{\n          required: true,\n          message: \"请输入学号或工号\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n\n  created() {\n    sessionStorage.removeItem(\"user\");\n  },\n\n  methods: {\n    toRegister() {\n      this.$router.push(\"/register\");\n    },\n\n    login() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          console.log(this.form);\n          request.post(\"/user/login\", this.form).then(res => {\n            if (res.code === \"0\") {\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\"\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n\n              if (res.data.identity === \"学生\") {\n                this.$router.push(\"/addclass\"); //学生登录成功页面跳转\n              } else {\n                this.$router.push(\"/addlesson\"); //老师登录成功页面跳转\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              });\n            }\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAkDA,OAAOA,OAAP,MAAoB,sBAApB;AAEA,eAAe;EACbC,IAAI,EAAE,WADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,EAAE,EAAEC,OAAO,CAAC,uBAAD,CADN;MAELC,IAAI,EAAE,EAFD;MAGLC,KAAK,EAAE;QACLC,MAAM,EAAE,CACN;UACEC,QAAQ,EAAE,IADZ;UAEEC,OAAO,EAAE,UAFX;UAGEC,OAAO,EAAE;QAHX,CADM,CADH;QAQLC,QAAQ,EAAE,CACR;UACEH,QAAQ,EAAE,IADZ;UAEEC,OAAO,EAAE,OAFX;UAGEC,OAAO,EAAE;QAHX,CADQ;MARL;IAHF,CAAP;EAoBD,CAvBY;;EAyBbE,OAAO,GAAG;IACRC,cAAc,CAACC,UAAf,CAA0B,MAA1B;EACD,CA3BY;;EA4BbC,OAAO,EAAE;IACPC,UAAU,GAAG;MACX,KAAKC,OAAL,CAAaC,IAAb,CAAkB,WAAlB;IACD,CAHM;;IAIPC,KAAK,GAAG;MACN,KAAKC,KAAL,CAAW,MAAX,EAAmBC,QAAnB,CAA6BC,KAAD,IAAW;QACrC,IAAIA,KAAJ,EAAW;UACTC,OAAO,CAACC,GAAR,CAAY,KAAKnB,IAAjB;UACAL,OAAO,CAACyB,IAAR,CAAa,aAAb,EAA4B,KAAKpB,IAAjC,EAAuCqB,IAAvC,CAA6CC,GAAD,IAAS;YACnD,IAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;cACpB,KAAKC,QAAL,CAAc;gBACZC,IAAI,EAAE,SADM;gBAEZrB,OAAO,EAAE;cAFG,CAAd;cAIAI,cAAc,CAACkB,OAAf,CAAuB,MAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACzB,IAAnB,CAA/B,EALoB,CAKsC;;cAC1D,IAAIyB,GAAG,CAACzB,IAAJ,CAASgC,QAAT,KAAsB,IAA1B,EAAgC;gBAC9B,KAAKjB,OAAL,CAAaC,IAAb,CAAkB,WAAlB,EAD8B,CACE;cAClC,CAFA,MAEO;gBACL,KAAKD,OAAL,CAAaC,IAAb,CAAkB,YAAlB,EADK,CAC4B;cACnC;YACF,CAXA,MAWO;cACL,KAAKW,QAAL,CAAc;gBACZC,IAAI,EAAE,OADM;gBAEZrB,OAAO,EAAEkB,GAAG,CAACQ;cAFD,CAAd;YAIF;UACD,CAlBD;QAmBF;MACD,CAvBD;IAwBD;;EA7BM;AA5BI,CAAf","names":["request","name","data","bg","require","form","rules","number","required","message","trigger","password","created","sessionStorage","removeItem","methods","toRegister","$router","push","login","$refs","validate","valid","console","log","post","then","res","code","$message","type","setItem","JSON","stringify","identity","msg"],"sourceRoot":"","sources":["C:\\Users\\laoshuaib\\Desktop\\restaurant\\src\\views\\userLogin.vue"],"sourcesContent":["<!--suppress CssUnusedSymbol -->\n<template>\n  <div\n    :style=\"{\n      width: '100%',\n      height: '100vh',\n      overflow: 'hidden',\n      background: 'url(' + bg + ')',\n      backgroundSize: 'cover',\n    }\"\n  >\n    <div style=\"width: 400px; margin: 150px auto\">\n      <div\n        style=\"\n          color: #cccccc;\n          font-size: 30px;\n          text-align: center;\n          padding: 30px 0;\n        \"\n      >\n        登录\n      </div>\n      <el-form ref=\"form\" :model=\"form\" size=\"default\" :rules=\"rules\">\n        <el-form-item prop=\"number\">\n          <el-input\n            prefix-icon=\"el-icon-user-solid\"\n            v-model=\"form.number\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            prefix-icon=\"el-icon-lock\"\n            v-model=\"form.password\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button style=\"width: 100%\" type=\"primary\" @click=\"login\"\n            >登录</el-button\n          >\n        </el-form-item>\n        <el-button type=\"text\" @click=\"toRegister\"\n          >没有账号？注册一个！</el-button\n        >\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"../../untils/request\";\n\nexport default {\n  name: \"userLogin\",\n  data() {\n    return {\n      bg: require(\"../assets/basealt.jpg\"),\n      form: {},\n      rules: {\n        number: [\n          {\n            required: true,\n            message: \"请输入学号或工号\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n\n  created() {\n    sessionStorage.removeItem(\"user\");\n  },\n  methods: {\n    toRegister() {\n      this.$router.push(\"/register\");\n    },\n    login() {\n      this.$refs[\"form\"].validate((valid) => {\n        if (valid) {\n          console.log(this.form);\n          request.post(\"/user/login\", this.form).then((res) => {\n            if (res.code === \"0\") {\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\",\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n              if (res.data.identity === \"学生\") {\n                this.$router.push(\"/addclass\"); //学生登录成功页面跳转\n              } else {\n                this.$router.push(\"/addlesson\"); //老师登录成功页面跳转\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg,\n              });\n            }\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"\">\n.el-textarea__inner,.el-input__inner {\n  background: transparent !important;\n}\n\n</style>\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import request from \"../../untils/request\";\nexport default {\n  name: \"userLogin\",\n\n  data() {\n    return {\n      bg: require(\"../assets/background.jpg\"),\n      form: {},\n      rules: {\n        id: [{\n          required: true,\n          message: \"请输入工号\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n\n  created() {\n    sessionStorage.removeItem(\"user\");\n  },\n\n  methods: {\n    login() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          request.post(\"/user/login\", this.form).then(res => {\n            if (res.code === 0) {\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\"\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n\n              if (res.data.job === 0) {\n                this.$router.push(\"/\"); //职工登录成功页面跳转\n              } else {\n                this.$router.push(\"/manager/ingredientManage\"); //经理登录成功页面跳转\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              });\n            }\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiDA,OAAOA,OAAP,MAAoB,sBAApB;AAEA,eAAe;EACbC,IAAI,EAAE,WADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,EAAE,EAAEC,OAAO,CAAC,0BAAD,CADN;MAELC,IAAI,EAAE,EAFD;MAGLC,KAAK,EAAE;QACLC,EAAE,EAAE,CACF;UACEC,QAAQ,EAAE,IADZ;UAEEC,OAAO,EAAE,OAFX;UAGEC,OAAO,EAAE;QAHX,CADE,CADC;QAQLC,QAAQ,EAAE,CACR;UACEH,QAAQ,EAAE,IADZ;UAEEC,OAAO,EAAE,OAFX;UAGEC,OAAO,EAAE;QAHX,CADQ;MARL;IAHF,CAAP;EAoBD,CAvBY;;EAyBbE,OAAO,GAAG;IACRC,cAAc,CAACC,UAAf,CAA0B,MAA1B;EACD,CA3BY;;EA4BbC,OAAO,EAAE;IACPC,KAAK,GAAG;MACN,KAAKC,KAAL,CAAW,MAAX,EAAmBC,QAAnB,CAA6BC,KAAD,IAAW;QACrC,IAAIA,KAAJ,EAAW;UACTnB,OAAO,CAACoB,IAAR,CAAa,aAAb,EAA4B,KAAKf,IAAjC,EAAuCgB,IAAvC,CAA6CC,GAAD,IAAS;YACnD,IAAIA,GAAG,CAACC,IAAJ,KAAa,CAAjB,EAAoB;cAClB,KAAKC,QAAL,CAAc;gBACZC,IAAI,EAAE,SADM;gBAEZhB,OAAO,EAAE;cAFG,CAAd;cAIAI,cAAc,CAACa,OAAf,CAAuB,MAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACpB,IAAnB,CAA/B,EALkB,CAKwC;;cAC1D,IAAIoB,GAAG,CAACpB,IAAJ,CAAS2B,GAAT,KAAiB,CAArB,EAAwB;gBACtB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,GAAlB,EADsB,CACE;cAC1B,CAFA,MAEO;gBACL,KAAKD,OAAL,CAAaC,IAAb,CAAkB,2BAAlB,EADK,CAC2C;cAClD;YACF,CAXA,MAWO;cACL,KAAKP,QAAL,CAAc;gBACZC,IAAI,EAAE,OADM;gBAEZhB,OAAO,EAAEa,GAAG,CAACU;cAFD,CAAd;YAIF;UACD,CAlBD;QAmBF;MACD,CAtBD;IAuBD;;EAzBM;AA5BI,CAAf","names":["request","name","data","bg","require","form","rules","id","required","message","trigger","password","created","sessionStorage","removeItem","methods","login","$refs","validate","valid","post","then","res","code","$message","type","setItem","JSON","stringify","job","$router","push","msg"],"sourceRoot":"","sources":["C:\\Users\\laoshuaib\\Desktop\\restaurant\\src\\views\\userLogin.vue"],"sourcesContent":["<!--suppress CssUnusedSymbol -->\n<template>\n  <div\n    :style=\"{\n      width: '100%',\n      height: '100vh',\n      overflow: 'hidden',\n      background: 'url(' + bg + ')',\n      backgroundSize: 'cover',\n    }\"\n  >\n    <div style=\"width: 400px; margin: 150px auto\">\n      <div\n        style=\"\n          color: #ffffff;\n          font-size: 30px;\n          text-align: center;\n          padding: 30px 0;\n        \"\n      >\n        xx餐馆系统\n      </div>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\n        <el-form-item prop=\"id\">\n          <el-input prefix-icon=\"Avatar\" v-model=\"form.id\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            prefix-icon=\"Lock\"\n            v-model=\"form.password\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            style=\"width: 100%\"\n            type=\"primary\"\n            @click=\"login\"\n            size=\"large\"\n            color=\"#f3d19e\"\n            >登录</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"../../untils/request\";\n\nexport default {\n  name: \"userLogin\",\n  data() {\n    return {\n      bg: require(\"../assets/background.jpg\"),\n      form: {},\n      rules: {\n        id: [\n          {\n            required: true,\n            message: \"请输入工号\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n\n  created() {\n    sessionStorage.removeItem(\"user\");\n  },\n  methods: {\n    login() {\n      this.$refs[\"form\"].validate((valid) => {\n        if (valid) {\n          request.post(\"/user/login\", this.form).then((res) => {\n            if (res.code === 0) {\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\",\n              });\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n              if (res.data.job === 0) {\n                this.$router.push(\"/\"); //职工登录成功页面跳转\n              } else {\n                this.$router.push(\"/manager/ingredientManage\"); //经理登录成功页面跳转\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg,\n              });\n            }\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n/deep/.el-input__wrapper {\n  height: 47px;\n}\n/deep/.el-form-item {\n  margin-bottom: 30px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
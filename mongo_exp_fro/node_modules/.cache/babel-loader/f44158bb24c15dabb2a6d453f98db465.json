{"ast":null,"code":"import request from \"../../untils/request\";\nexport default {\n  name: \"managerHeader\",\n  components: {},\n\n  data() {\n    return {\n      dialogVisible: false,\n      //控制学生弹窗\n      form: {},\n      //用于获取user\n      tableData: []\n    };\n  },\n\n  created() {\n    let str = sessionStorage.getItem(\"user\");\n    this.form = JSON.parse(str);\n    this.loadStudent();\n  },\n\n  methods: {\n    openDialog() {\n      this.dialogVisible = true;\n    },\n\n    loadStudent() {\n      request.get(\"/student\", {\n        params: {\n          id: this.form.id\n        }\n      }).then(res => {\n        console.log(res);\n        this.Tform = JSON.parse(JSON.stringify(res.data));\n      });\n    },\n\n    save() {\n      //更新\n      this.form.username = this.Tform.name;\n      request.put(\"/user\", this.form).then(res => {\n        console.log(res);\n\n        if (res.code === \"0\") {\n          sessionStorage.removeItem(\"user\");\n          sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n\n          let str = sessionStorage.getItem(\"user\");\n          this.form = JSON.parse(str);\n          this.dialogVisible = false;\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n      request.put(\"/student\", this.Tform).then(res => {\n        console.log(res);\n\n        if (res.code === \"0\") {\n          this.$message({\n            type: \"success\",\n            message: \"更新成功\"\n          });\n          this.dialogVisible = false;\n          this.tableData = res.data;\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6DA,OAAOA,OAAP,MAAoB,sBAApB;AAEA,eAAe;EACbC,IAAI,EAAE,eADO;EAEbC,UAAU,EAAE,EAFC;;EAGbC,IAAI,GAAG;IACL,OAAO;MACLC,aAAa,EAAE,KADV;MACiB;MACtBC,IAAI,EAAE,EAFD;MAEK;MACVC,SAAS,EAAE;IAHN,CAAP;EAKD,CATY;;EAUbC,OAAO,GAAG;IACR,IAAIC,GAAE,GAAIC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAV;IACA,KAAKL,IAAL,GAAYM,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAAZ;IACA,KAAKK,WAAL;EACD,CAdY;;EAebC,OAAO,EAAE;IACPC,UAAU,GAAG;MACX,KAAKX,aAAL,GAAqB,IAArB;IACD,CAHM;;IAKPS,WAAW,GAAG;MACZb,OAAM,CACHgB,GADH,CACO,UADP,EACmB;QACfC,MAAM,EAAE;UACNC,EAAE,EAAE,KAAKb,IAAL,CAAUa;QADR;MADO,CADnB,EAMGC,IANH,CAMSC,GAAD,IAAS;QACbC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACA,KAAKG,KAAL,GAAaZ,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACa,SAAL,CAAeJ,GAAG,CAACjB,IAAnB,CAAX,CAAb;MACD,CATH;IAUD,CAhBM;;IAkBPsB,IAAI,GAAG;MACL;MACA,KAAKpB,IAAL,CAAUqB,QAAV,GAAqB,KAAKH,KAAL,CAAWtB,IAAhC;MACAD,OAAO,CAAC2B,GAAR,CAAY,OAAZ,EAAqB,KAAKtB,IAA1B,EAAgCc,IAAhC,CAAsCC,GAAD,IAAS;QAC5CC,OAAO,CAACC,GAAR,CAAYF,GAAZ;;QACA,IAAIA,GAAG,CAACQ,IAAJ,KAAa,GAAjB,EAAsB;UACpBnB,cAAc,CAACoB,UAAf,CAA0B,MAA1B;UACApB,cAAc,CAACqB,OAAf,CAAuB,MAAvB,EAA+BnB,IAAI,CAACa,SAAL,CAAeJ,GAAG,CAACjB,IAAnB,CAA/B,EAFoB,CAEsC;;UAC1D,IAAIK,GAAE,GAAIC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAV;UACA,KAAKL,IAAL,GAAYM,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAAZ;UACA,KAAKJ,aAAL,GAAqB,KAArB;QACF,CANA,MAMO;UACL,KAAK2B,QAAL,CAAc;YACZC,IAAI,EAAE,OADM;YAEZC,OAAO,EAAEb,GAAG,CAACc;UAFD,CAAd;QAIF;MACD,CAdD;MAeAlC,OAAO,CAAC2B,GAAR,CAAY,UAAZ,EAAwB,KAAKJ,KAA7B,EAAoCJ,IAApC,CAA0CC,GAAD,IAAS;QAChDC,OAAO,CAACC,GAAR,CAAYF,GAAZ;;QACA,IAAIA,GAAG,CAACQ,IAAJ,KAAa,GAAjB,EAAsB;UACpB,KAAKG,QAAL,CAAc;YACZC,IAAI,EAAE,SADM;YAEZC,OAAO,EAAE;UAFG,CAAd;UAIA,KAAK7B,aAAL,GAAqB,KAArB;UACA,KAAKE,SAAL,GAAiBc,GAAG,CAACjB,IAArB;QACF,CAPA,MAOO;UACL,KAAK4B,QAAL,CAAc;YACZC,IAAI,EAAE,OADM;YAEZC,OAAO,EAAEb,GAAG,CAACc;UAFD,CAAd;QAIF;MACD,CAfD;IAgBD;;EApDM;AAfI,CAAf","names":["request","name","components","data","dialogVisible","form","tableData","created","str","sessionStorage","getItem","JSON","parse","loadStudent","methods","openDialog","get","params","id","then","res","console","log","Tform","stringify","save","username","put","code","removeItem","setItem","$message","type","message","msg"],"sourceRoot":"","sources":["C:\\Users\\laoshuaib\\Desktop\\restaurant\\src\\components\\managerHeader.vue"],"sourcesContent":["<!--suppress CssUnusedSymbol, JSUnusedGlobalSymbols -->\n<template>\n  <div\n    style=\"\n      height: 50px;\n      line-height: 50px;\n      border-bottom: 1px solid #ccc;\n      display: flex;\n      background: #fdf6ec;\n    \"\n  >\n    <div\n      style=\"\n        width: 200px;\n        padding-left: 50px;\n        font-weight: bold;\n        font-size: 18px;\n        color: #c95f5f;\n      \"\n    >\n      xx餐厅系统\n    </div>\n    <div style=\"flex: 1\"></div>\n    <div style=\"width: 100px; font-weight: bold; font-size: 18px\">\n      <el-dropdown>\n        <span class=\"el-dropdown-link\">\n          {{ form.id }}\n          <i class=\"el-icon-arrow-down el-icon--right\"></i>\n        </span>\n        <template #dropdown>\n          <el-dropdown-menu>\n            <el-dropdown-item @click=\"openDialog\">个人信息</el-dropdown-item>\n            <el-dropdown-item @click=\"$router.push('/login')\" divided\n              >退出系统</el-dropdown-item\n            >\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n\n      <el-dialog\n        v-model=\"dialogVisible\"\n        title=\"个人信息\"\n        width=\"30%\"\n        custom-class=\"el-dialog\"\n      >\n        <el-form ref=\"form\" :model=\"xxx\" label-width=\"80px\">\n          <el-form-item label=\"学号\">\n            <el-input v-model=\"xxx.number\" disabled></el-input>\n          </el-form-item>\n        </el-form>\n        <template #footer>\n          <span class=\"dialog-footer\">\n            <el-button type=\"primary\" @click=\"save\">保存</el-button>\n          </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"../../untils/request\";\n\nexport default {\n  name: \"managerHeader\",\n  components: {},\n  data() {\n    return {\n      dialogVisible: false, //控制学生弹窗\n      form: {}, //用于获取user\n      tableData: [],\n    };\n  },\n  created() {\n    let str = sessionStorage.getItem(\"user\");\n    this.form = JSON.parse(str);\n    this.loadStudent();\n  },\n  methods: {\n    openDialog() {\n      this.dialogVisible = true;\n    },\n\n    loadStudent() {\n      request\n        .get(\"/student\", {\n          params: {\n            id: this.form.id,\n          },\n        })\n        .then((res) => {\n          console.log(res);\n          this.Tform = JSON.parse(JSON.stringify(res.data));\n        });\n    },\n\n    save() {\n      //更新\n      this.form.username = this.Tform.name;\n      request.put(\"/user\", this.form).then((res) => {\n        console.log(res);\n        if (res.code === \"0\") {\n          sessionStorage.removeItem(\"user\");\n          sessionStorage.setItem(\"user\", JSON.stringify(res.data)); //缓存用户信息\n          let str = sessionStorage.getItem(\"user\");\n          this.form = JSON.parse(str);\n          this.dialogVisible = false;\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          });\n        }\n      });\n      request.put(\"/student\", this.Tform).then((res) => {\n        console.log(res);\n        if (res.code === \"0\") {\n          this.$message({\n            type: \"success\",\n            message: \"更新成功\",\n          });\n          this.dialogVisible = false;\n          this.tableData = res.data;\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style>\n/* dialog自定义*/\n/*绝对居中*/\n.el-dialog {\n  display: flex;\n  flex-direction: column;\n  margin: 0 !important;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.el-dialog >>> .el-dialog__body {\n  flex: 1;\n  overflow: auto;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}